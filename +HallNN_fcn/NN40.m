function [y1] = NN40(x1)
%NN40 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:28.
% 
% [y1] = NN40(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [1.99834443343167;1.99836040690519;1.99981563526211;1.99866052432177;1.99902173601483;1.998484968535;2;1.9983824743203;1.99986821004798;1.99949687961879;1.99822189563985;1.99804378910972;1.99837445611113];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.48041468777602713836;-0.25856601794707950726;1.0763807180221285353;-0.38147892719897869007;0.33234530467240669394;0.3004842697066230639;-0.21744651612399895635;0.52038237724856573063;0.045397079595962258614;0.33543056190310632791;0.18648507332167146844;-2.5035177259832215313;-1.0215148312466972857;-0.27633730152593327656;-0.80367141926216734138;-0.44976552539370490136;0.0031437646808460725095;-0.34592675189852489792;-0.39653504025008212697;0.36664590022641863065];
IW1_1 = [0.25168768981798422812 0.60041254601077342912 0.28382852388846468994 0.31847434593185591778 -0.18944546961885364023 -0.20571623174357386854 0.24205875257985492999 0.066072395193105856737 -0.076850860630572850885 -0.14846534101602110178 0.38653863839390062429 0.13026589469594360149 -0.027022421669717945625;-0.74196184795880992802 0.15694270464337989335 0.68640825585962794708 -0.43194472229587921319 -0.01053125719051518569 0.21760578372164143812 0.38336364599941497033 0.40809538342748463702 0.3534003316428453445 0.5187113553966046231 -0.1406279707783111288 -0.077007868370094795241 -0.082102908560841431074;-0.12722240893340616696 -0.19415178204910918391 0.18467149882356614921 0.19769040929552858521 0.089781605814876833116 0.42918371085860829162 -0.062750514716021610351 -1.260256428786420857 0.01265320961481515398 -0.31212396130997355215 0.37965772797364805147 0.024516445827202026919 0.1296480074115453629;0.62977533873682844945 -0.52033588000034580734 -0.63597224366994575817 -0.77022363378458846839 0.13520533731776437913 0.16699846111981636598 -0.13945996651555211954 -0.35103763402244575476 0.011022407942720680724 0.092584036336517905319 -0.25939562443054597907 -0.19348856414999676678 0.023777907451200574335;-1.4103950141783239136 -0.049516882872778139602 0.33502157526899362106 1.2579346537054101329 -0.20558120038218199999 -0.022405476034680720659 -0.05680607640827938648 0.13767104859870268885 0.073447590783825664196 -0.12254387256762672154 0.2008578717774847644 -0.051074328120974697709 -0.10162107316934540502;-0.27040806019065016796 -0.19023453178158652999 0.036609502998886010727 -0.062092155399289458706 -0.2275435329185800104 0.060313060218089548092 0.080862232301015080083 -0.061734509964295643247 0.037727862070746999434 0.013403626587339068088 -0.086197838360871900654 -0.02430841179811632502 0.10917251964326162017;-0.3876777701163628409 -0.50417986109612888956 0.050226169474348755783 -0.28896413597216941138 0.12719290700905086511 -0.19098194340369378796 0.20592961170106566238 -1.0437066605839457889 0.088675047458994279981 -0.49943569214662963951 -0.33679413744616998327 -0.23126411280683503713 0.050692385115276815399;0.16624930797907608304 0.75028034341452876088 -0.14042830939731612561 -0.4531162686081900981 -1.3648653031104724942 -0.96467784542159729089 1.8144032169389820996 -0.16933545874274388843 -0.18230283518784196062 -0.81474009177339057342 -0.11887573610244638045 -0.077862040644564756153 -0.15438944999580714312;-0.49488851659078292311 -0.35271681624029593838 0.47223023824135618165 0.74423292395026907631 0.3390407710413532727 0.13662486565541023809 -0.078045995379403959591 -0.12973323619143087293 0.27086725890733859279 -0.4184256469541655088 0.33511662883700349402 -0.0010774254570033239831 -0.067697247487098696772;-0.17756392393858588807 -0.6499284437945196391 -0.1332559309855655405 -0.019008482071970839167 0.54302334010856823099 0.52310910210263594777 -0.68189899193449221571 -0.96145551510882609758 0.14771770394493316525 0.63097566510578129151 0.0055045109308890713407 0.022963198996681907782 0.027938289427851693142;0.38454144577104787395 -0.2552297011734538934 -0.12844484537121839129 0.079962970047774958871 -0.10234004995250628456 0.069300022812962741581 -0.037774500134147875885 0.033563742282634104197 0.0497567946997131208 -0.042624717341967321982 -0.14888270570197659204 -0.035038768554867927296 0.015867544752972709277;-1.5569586390711023238 -0.66591826981135748831 1.202027608942969561 -0.1760883346704032737 0.38732240066749279439 0.19159226149247102211 -0.67533252670095111903 0.53517167996046333123 -0.070290826652818994003 0.51827702258646257683 0.027632210997106807643 0.0065833722555268172488 0.026546310130763330765;-0.9562733570844391684 -0.2659048683459205864 1.326103943903067961 -1.1458713781642004825 -0.053150027296177786151 0.17758579949406688714 -0.16738860822385612237 0.76856346572975997589 -0.26185498226043013581 0.36192372398571126535 -0.49719215233900099227 -0.28082593500020497368 0.11711059875877564973;-0.25129861536167824587 -0.64123433028794474264 0.69159608690177742929 -0.61532023282491954408 0.11167453668960794499 -0.22507735086404223601 0.35667243339966936411 0.35427022397257906805 -0.16201812449550134776 -0.63857995744957785078 -0.032977951982538042386 -0.042664723171113604072 -0.0082634137299856420811;0.2253234993130345809 -0.24874722954481773285 0.63233677218954509325 -1.1813540432305882355 0.11276120856695173722 0.089165553368869637785 -0.30462774944840498303 0.13469183260188180573 0.085581984082140294401 0.4372621422200174135 0.48169522524765245874 0.27282698336251431925 -0.051897241262358229097;0.21783370008320693256 0.59092618858303558316 0.36796704853899114829 -0.2348504777940497168 -0.047531141413884855917 -0.24215842858744113242 -0.24033538067553711359 -0.34287144854308149178 -0.11821934371064195257 -0.027214035861283968759 0.019408249500593117987 0.026232261825880728162 -0.027520357854650172313;-0.39983688892167118523 0.024603857676823236156 0.67901544361711274611 -0.39469648618213948321 0.14332648881550760778 -0.1110342350949090201 -0.44984848851751763066 -0.21954736939229366199 -0.11284743429640248236 -0.1560694310515815808 0.029989983435286651781 0.015911588078733922974 -0.071854074348614918599;0.094500267592270412176 0.39113288010506291892 0.26978004603706062792 -0.23915497125512105714 -0.31689507926640386737 -0.27351325926211272899 0.72643400123895707221 1.6343150669579435963 -0.022469502637603985806 -0.55943093506890184674 0.094213705122343505138 -0.061448716016643971372 -0.058857264031807243754;0.14836561158852024089 0.34253661486806696868 0.22842587283240858853 -0.67350419798222549428 -0.030895171077232552737 0.41964071442814437907 -0.097210545663313635556 0.055515845101363647807 0.11226348996607483921 -0.028034240814221924459 0.21319924160786699052 0.067184765865820617048 0.16256299997843651206;0.93071043380034568226 0.71038692742545528347 -0.29313498726905190539 -0.6423377927620226302 0.075931175599706829393 -0.31841179854089668444 -0.21093148083903714984 -0.24693393408743599671 0.069098395835420642341 -0.22315408127160668572 -0.23432300865268179679 0.010593093939788137542 -0.024881782443520381737];

% Layer 2
b2 = [-0.36779522544031267861;0.21905111648533984181;0.61806534121198453136;0.76583009266069557164;0.34560559373466276378;0.28498163210745575125;-0.092866897858584471215;-0.19555692466811427921];
LW2_1 = [-0.31746885232176041969 -0.28894486968829158346 -0.8050030231781784007 -0.15715022410462267666 0.18872232546111847307 -0.094439902576663667388 0.17145918966320164434 -0.57157690178968267869 -0.055568353467697943759 -0.089597984017463189188 -0.14330368127699891212 0.042350557869844693282 0.61153698777793819019 0.39325350587333945951 0.45655518221359642217 -0.010896626079154614689 -0.065698206077507370626 -0.27189494759245169675 0.16501383671412944709 -0.27757652177132297044;0.1006510511454642709 0.065758580281040479587 -0.23394466178277187329 0.10115511243873968883 0.10888726740013150718 0.29954305287227428467 0.098553156587852061565 -0.089249343887731438785 -0.040817631376305646418 0.36972283182666620949 -0.12632861829280317423 -0.44196284989896328366 0.24045716007436715445 0.090003037621970358173 0.10209185399419283546 -0.50463898081479918734 0.44232746396126104704 0.1575490663438009753 0.043380291764718990899 0.20001986286107112378;0.25171133640842430212 0.21405781929869582836 -0.0086618656935461193352 -0.011804537486746730091 0.05961902104508489536 -0.12607113626515548122 0.16974286272392360986 0.11516453718598614053 0.089176944333534333142 -0.27885088683824188482 0.46339129021961261712 0.44932283240853709838 0.27322965020141903869 0.092181571145017057733 0.2030871016194922829 0.30725205705579666793 0.0022320433194144154512 -0.060162115585831676956 0.18774590558274942276 -0.058294042137351509414;-0.14740678534735354721 -0.90820615495612289081 1.0440339175127033577 0.90038628805815756895 -1.1616667720803477426 -0.082812899359139907629 -1.1112920770924294978 0.74603648791386967254 -0.65205268656053605447 1.0547524915011381452 0.070300230168560365329 0.4045344774748251826 -1.5970110958290490988 -1.3450291812882879672 -1.2179311439054476551 -0.64298311705715849307 -0.7952657926626777174 1.3633426635665883975 -0.882923673644134821 0.91032240733915970043;0.46837472348663489186 -0.19018482022399851861 -0.23933717491247910591 0.2273519039978365297 0.004703170186954166998 -0.31641000573735006407 -0.034965140229879745903 -0.42444818626100394576 -0.096870004001384360515 0.43707313771453515372 0.18015624786750486508 0.54220742619008988061 0.14193552331592526605 0.13690236360220617295 -0.03878618524731726469 -0.44557945437592755278 -0.18984930340018030259 0.037708309554432273281 -0.14180056420751085966 0.12127050562282351565;-0.055227739995738614476 0.24456702958733939068 -0.073543620384498395448 -0.18375875255070842074 0.18382529862270297061 0.02993288667454145624 0.099735614595035285146 -0.25470536894454798293 0.076910084963974542638 0.0022765180611971445185 -0.27603887389588593892 -0.0805984262583359784 0.48640727270449868325 0.24837975204431161913 0.2025948477100815992 -0.14584259139054325805 0.39986212653431163488 0.17465936189259903544 0.1448042664506268562 -0.14896699123881249061;-0.017881083148239225455 -0.053688314690043550947 -0.20886438375372087806 0.12124576028861122623 0.27117658257016441503 0.14831969417984908199 0.080892626310415896573 -0.44813791816122067191 -0.19672757926982395449 0.19714423382217924341 0.48931266266541034726 1.4118338060810642354 0.38549003822524235963 0.30725061960099275815 0.28208507385980891025 0.23423534140952889659 0.20411741903943114718 0.40603076815952293677 -0.22475107126772683741 0.34714753245175339336;0.047509482012746614976 -0.094708052595400077367 -0.017331695248692172151 0.0087331324709203385359 -0.13117755383855961293 -0.1887261808858057277 0.038726076190640765229 0.32775270223536173697 0.052944691412607401693 -0.16507425798736161116 0.24387421212837315232 -0.28235563076619157874 -0.12491811890501908211 -0.24672023474950208199 -0.077816822963273510338 0.2089117681788334735 -0.21085140399078752815 -0.17446695565378994575 0.19003343080622650541 0.067709012739119348034];

% Layer 3
b3 = [-0.19679743785514638987;-0.24931789076151300577];
LW3_2 = [-0.59873746483298839749 -0.77008179526554976224 0.9090701740830349209 1.287135274195286172 0.8839189795007257322 -0.14922726586422144224 0.87106021025107216449 0.30811163689076143113;-0.4777402448176721883 -0.57538506311283643679 1.1814139443221918224 1.3286809732870881184 0.67919204058580151528 -0.59835479935158286668 0.70383211228016795413 -0.33381957910517701116];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
