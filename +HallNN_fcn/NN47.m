function [y1] = NN47(x1)
%NN47 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:28.
% 
% [y1] = NN47(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [2;1.99986492611437;1.99835631170862;2;1.99843619677798;1.99836633886978;2;1.9985561713825;1.99837249101292;1.99804425751013;1.99816004530078;1.99831566061496;1.9992780722381];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.33334687255507206016;-0.81894607033550759212;0.35038948695082755558;0.051869031204147951486;0.27057513551457473833;1.7695334582242774335;0.92634712319139556058;-0.7217300198770708608;-0.82282127834886642503;-0.43311948023225227411;0.33972187578627505156;-0.25143614051553309086;0.53952315722219323924;0.0009735949641688022415;-0.15295413893379461445;-0.23481026441267069393;-0.46269007817264301563;-0.79027399361417127732;0.089679450618423431352;0.44279598226183930487];
IW1_1 = [1.3524519528768677024 -0.20155515041159588474 -0.30575254492455589128 -0.69676541818680659546 0.14713119779784716856 0.037957508044531525215 -0.20893286869419822049 -0.18846292071443887517 -0.039507378409268656405 -0.048238634733203410165 -0.29084498541166831087 0.0030746640216073521483 0.057384749534872388221;0.15615486032289402352 0.17508198384787510005 0.066198114659035189877 0.040079425987313357926 -0.080700852280682272566 -0.17322153765555747817 -0.09454239803118287544 -0.29232382006906965088 -0.046038329101812186517 0.058027955757666456471 -0.098124440178898028608 0.060799028600537069478 -0.012577520932150880809;0.35416110833019925908 0.34588324746818177591 0.94193537286236328487 -2.0924966041191814803 -0.17426122905869254054 0.043292244392392431607 -0.14848890814488988066 0.11693617927639864129 -0.028508454346288014669 0.0048223120723904751642 0.17908659669631110667 -0.12284878632018392253 0.01983058398136468975;0.65674270401579226686 -0.032975793691198379554 -0.14544007674631950766 -0.24244800224818960355 0.67130894222787684811 -0.01816291599143228172 -0.56824294997109869865 0.14111439906041103876 0.0025022509315131172096 0.15477613424086705818 -0.0062219792866262226341 -0.10672652893534696761 0.094871363456608390208;0.46753151390489855466 -1.3527636571736190163 -0.55777804747757475656 0.49292575023758344877 1.0857498162410095244 0.69819493522662434692 -1.4052351608516557846 -0.6503196581572945334 -0.18100008107259857315 0.9941701321257147006 0.32509914919586957449 0.40997738157939422887 0.0064174530857159656216;1.3340149861260988118 0.81288334427294506312 -1.2810496986721295887 0.55743005372337128822 -0.75958460552014195333 -0.61275454633419046413 1.2451377766171480843 -1.3072233938127211239 0.10313809647979026163 -0.86073294810936917809 0.12191883365983539889 0.1805992652863692427 -0.080994454900461726465;-0.025821173806566104919 0.39025927662056025813 -0.13661527651044305665 0.20138093502834400472 -0.57190181903544845543 0.2207578269400751747 -0.21012731936813003331 -1.7174471502169388337 -0.074359295103927428028 0.14434167735872066585 0.85090462200534233705 -0.00011571342627072193519 -0.035743242943314913751;-0.66533415146806795804 -0.28792644291728031192 -0.053496090484039068857 0.27264129509194445777 -0.10470255437697670309 -0.39627397043497036844 -1.0533771237009135202 0.0096094274255082295921 -0.69287016896579523006 0.47788224360073505714 -1.2350360237821194076 0.33791265076416726609 0.10702515169015067165;0.25159481510674475135 0.44637586949012342252 -0.75995950986652993642 0.037720958215235737832 -0.11728863958952753799 0.25776756051010674131 -0.49958614731843564716 1.3002147817636691141 -0.19847406271184314663 0.55735895060790041633 -0.091292980302758008904 -0.30474399053653095093 0.14003700440440372543;-0.51815392015875372245 -0.34472947063819830982 -0.42010352812375850728 -0.13430415517234525757 -0.14598780683281906145 -0.12110569646639035568 0.28955891876014888675 -0.50851417374072782618 0.17941922189278106115 0.059900573579009269709 -0.1257911827549602346 -0.27314486127186771158 0.095064802446116702939;-1.1128743102452034464 0.68897365771668417356 0.66368741413249310312 0.52661914719744529201 -0.86320676438486543258 -0.32666318453415632561 0.22715031370877300509 -0.54243043076582475592 -0.51604531185010105165 -0.59915508469692202453 -0.11375739617729142827 -1.2685946908374978737 0.34710203913066955961;0.14846657713681835067 0.2401564529130529313 -0.26669298018532555661 0.16516525114430469223 0.12474343030478146632 0.14113759672378989318 -0.47557110236020339045 0.92879784937184428628 -0.17100212645058704419 0.57657540340477397844 0.20587100823632217828 0.6558185301029514358 -0.21518994413827852163;-0.33743455949521250492 -0.11809821192797331779 0.17482838476071468903 -0.2251114669489118203 0.10235683238390085037 -0.038526304495903350433 -0.13942291350162583363 -0.15624971577250060251 -0.010164927636968515076 0.029588411451918875811 -0.0054814759487277556205 0.036948334333163489196 0.0077085661548576310878;-0.36023415288685334268 -0.71042042086213896823 0.41427935749846767077 -0.59931571435160113648 0.24889959616144510801 0.81224537439536592665 -0.029452773120707570476 -0.7998118153198262581 0.35740028360841269439 0.26820516134617233828 0.0073380822440753746064 0.043005805550278060345 -0.13195858188343440043;-1.2242273883968484149 -0.36545539452917308321 0.69632854072509942078 0.79044338909171618646 -0.68207634883069356846 0.18236571245738675273 0.065312622449902893451 -0.092928982447956748336 -0.023338015280011194935 0.099519914695095829105 0.24581085338415945007 0.03477796682197134559 -0.15603529270306204513;-0.8065306489865907702 -0.073895245134221757 0.4690683293792044517 -0.10296891566196693379 0.19736110796583630766 -0.24247548055223611119 -0.041907515735464528905 0.66939211953037580649 0.084156599898984441044 -0.17640449421189904888 -0.46195391804952806725 -0.25197010570723005207 0.028830577246635107763;-1.3444912033290870035 -0.37459546298057555536 1.7897033281010188421 -1.1431476340864907826 -0.068962070647758028086 0.23725001207784343626 -0.46130625407253494918 -0.55533974040100586578 -0.13959005252796782837 0.54915170562914150665 -0.44369376631106727249 -0.28637102093696148453 0.16865135779578735442;-0.78444439507188934435 -0.052200823541147862994 -0.038331670370187850838 -0.31081809406642924021 0.38841882645657294093 0.08585799996111263821 -0.25022766642073746013 -0.28075062531299177504 0.08746282671074460946 -0.10546786386664439017 -0.46519141848129214045 -0.10243829728657649625 0.028521706326436850609;0.69200950985401321613 -0.26656264057015388591 -0.018501392752689662519 -0.23929619657055070658 0.11810964328564689529 -0.31726742461248796934 0.3388093502077375585 0.24092887711945712437 0.074653286280508768247 -0.15805563679133968757 0.19866488249672634159 0.099487303934551574169 -0.065614419777113131005;-0.73038689514249410806 0.23020391143931767663 0.43218046311449409558 0.38801356560019545361 -0.222600260099411279 -0.14379239809396865413 0.019420631336005605982 1.0600441547292944744 0.13034959617380795227 0.81762592276136447644 0.1529446046844632201 -0.27539939554050035797 -0.22765627902206886368];

% Layer 2
b2 = [-0.14220618644808349917;0.51787098344805149175;-0.25574492835472506513;-0.023774401824291229585;0.24054292866094781345;-1.056886540456803969;0.70849435102416924437;0.17673874304561787429];
LW2_1 = [0.19409085888284588473 0.13209146771938726217 -0.10753510108723639271 -0.048699767417798293934 0.25033535002796553082 0.43075822413573700009 -0.18986140772365919793 0.077977001424633235471 0.19846885137483580297 0.22964778361577925514 -0.094677529193662957052 -0.46643046423696854497 0.030936919123025478917 0.056678683868751793262 0.1116939837575383343 0.13109058495954248325 -0.13718751762211134348 0.1381219265383537842 0.16586147687440960796 0.081944539109336231308;-0.25226177909294433821 -0.41974602584347148193 -0.0053479946349520648963 -0.061226918918466946562 -0.13933675995767691447 0.14526422284560119857 0.10916486237262877645 -0.11687425608215053219 0.37393355259960331383 -0.23968215180323299007 -0.055172761460467852068 0.022048722348043517383 0.27042420677441886268 0.24710291658743252508 -0.23466700462846484809 0.39174797178863424163 0.6078371652251747248 0.36198392006974233759 0.38260221751623973985 -0.3665294918233502619;0.14059645467983836187 0.72810030257011626453 -0.051760410587022055717 0.85696581465533783195 -0.13636969996211154021 0.062731779669133042043 0.34402548384592318564 0.042915754689568784419 0.36012058026610371808 -0.1687454301574846105 0.13966733292394042931 0.50395464345210350121 0.2350401386647405777 0.35126815123545562791 0.43235546903068905467 0.61858919533022993509 0.050800880794022791609 0.22477178544133355476 0.56830102059480280818 0.11256747755516006981;-0.16345179534663087373 0.073549994661512962946 0.1745121654069159145 0.64013285575470724176 0.24180812903703685635 0.20959900751112012229 -0.1589775080118678019 0.24084766082541464449 -0.056331109427492379038 0.18241341206652639251 0.15406322049723358836 0.12648892239884815258 0.54886439360888539252 0.21894395784426476381 0.12157951454336375641 -0.14271982399463123414 -0.53683667350948616193 0.35213080600044094348 -0.29400666315472168133 0.083090455457173986731;-0.029306121512431896475 0.10343930791739418262 0.083232091539674049607 -0.33110409403492779834 -0.65855378803363873175 0.06267997467776120768 0.01421011443323024967 0.24817321721225577003 -0.26724940516442402538 0.24689391489595796658 -0.083249605655992764408 -0.25543491637524717852 0.14927934894368152796 -0.20742204195422078716 0.11192886893459177977 -0.46138213026020324925 -0.4406969969858050562 0.03545817409557768668 0.0011080610996727232286 0.13110729777275365038;-1.3938476097728631498 0.37471510970313359756 1.8623491908645977144 -0.19531942603539642622 -0.26209112979157778156 -1.7603347708774756963 -1.0293555826719487101 -0.64509320414691606604 -1.129248907999946594 -0.83610224981666037003 -0.61849124960379942006 -1.005877380638277474 -0.21128156055054955753 -1.0106569633313813306 1.0509715608171401602 -0.64633218156340155325 1.4797122078780315935 0.86744326126351678496 0.13226352544138730849 -0.70166247995844821528;-0.22826842317501916391 0.091935011653653975205 -0.24507373161296200359 0.18691594909701853 0.28363086426777228688 0.43638581586446983929 0.066869153057696723019 -0.061636629676528421895 0.35082823974469978801 -0.15947831608356938249 -0.15923250481544756751 -0.2737453683277408234 -0.75450087774139673602 0.031496288958005297376 -0.073801403973718052165 0.2734407660128579387 -0.098467824078387278242 0.52675379031792723961 -0.41324990666207139789 0.084128342320664795118;0.13067850069147335379 -0.26806599225716898349 -0.43045871426550103012 -0.456405754945268749 0.21836127024491294724 -0.071618158330128925404 0.29220947160204935322 -0.29506510674029934327 0.34587962294299989807 -0.12130177059492745772 -0.17229072614647833461 -0.18221257845128693842 0.14108585334357925944 -0.19237912122494982281 0.085878353628766404548 0.59643296731727624138 0.2464458356550721374 0.19067987166287655998 0.07431762117229254172 0.14806180176278599392];

% Layer 3
b3 = [-0.41173185856539534777;-0.27953888879532712286];
LW3_2 = [0.27642206870087920878 -0.55066263441293328285 0.33746232091083222526 -0.99548722401833567019 -0.33056281011392429914 -1.3612805095123574617 0.49387960132014452341 -0.78586547861231392798;0.36913890427121814897 -0.52203543493176629564 0.32826950473483051951 -0.88751975557605655709 -0.29574110978970807873 -1.296328064319220541 0.29083705645787688576 -0.61853494023990052142];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
