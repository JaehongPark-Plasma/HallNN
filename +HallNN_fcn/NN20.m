function [y1] = NN20(x1)
%NN20 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:27.
% 
% [y1] = NN20(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [1.99971620235944;2;1.99869350786158;1.99848810385119;1.9984741194944;1.9987517546816;1.99847960883123;1.99801652766476;1.99823914558508;1.99912739493488;1.99824832045694;1.99924407984931;1.99820325880628];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.57951599112411800174;-0.40521716216465947236;-0.0051296563990118155749;0.71897005168543204334;0.13427019776744736346;0.19534168313133989936;0.21487593494508819281;0.058609201632846247287;-0.14352763709651622515;-0.046140826828414228944;0.040429150686380289914;0.12577645207475354749;-0.82822554200975617711;1.5078051116696891132;0.0022940539854043109913;0.16660594782198059893;-0.23251297040855345433;0.43117553885000309277;-0.14165853979978854094;-0.096415887177407066932];
IW1_1 = [0.61376459910623715199 -0.23337546384578936043 -1.4388201584038875502 -0.85644187081029166109 -0.80239282024809932548 -0.54016129856983996493 -0.39070592756701050252 -0.66087854904610543461 -0.12719238699612303578 0.083690314609172200555 0.22935485136797259531 -0.38351478865577676158 -0.19496265481746416492;-0.42268432115684606565 -0.94237010535459653227 0.42014093998763241133 -0.6556252517753708986 0.78368865050016234264 0.50187852055671700047 -1.1676678420594508445 -0.27754412418912011162 -0.16515731530851107678 0.99146943922323149678 -0.012926075106735393505 -0.041142692790623186516 0.15850065412528316355;-0.21812504583087907739 -0.43768468528095810788 0.73825027015131883257 -0.35689352766325543875 0.23408415602742502215 0.047161565535019968343 0.39487444445469827015 0.050820715846988745446 0.17997743698125057143 -0.68082318972006861113 -0.33086492146291712757 -0.036442363680331234244 0.093401659451807186874;0.14108940590861596132 -0.51608524262543753469 -0.45527700864178893836 0.12901003571735231157 0.57442476617203619416 0.21363533004449716812 -0.51672373989431263919 0.19917031102167304102 -0.0069357182746742672766 0.087733787141577881941 0.047890888774476135514 0.003512132509501847237 0.041214729902123672933;0.44881176775010339641 0.083822005259687359935 0.34722965343685346928 -1.522560667418457081 -0.47442505026614828489 -0.21751780970109863 -0.0063478358117624337706 0.44933867574621194629 -0.21335595959063385907 -0.15310267386595780015 0.16569125929564729183 -0.17797194213037431654 -0.095596013354298833842;0.20902404701377030882 -0.38110592255999414801 -0.27661290265445703795 0.10658114521380024353 -0.46808008613920448759 -0.13527187379058694394 0.62767133168545929944 -0.51447050414217776471 0.063230491319692647134 -0.11133185611247065072 -0.30705789016067103203 -0.1114522399296018762 0.050115202198833086467;-0.10210529525779239723 -0.53624390041140967966 0.068776943914053312312 0.034849888203560351607 -0.12241591583957517342 -0.0483106876344785649 -0.41640264153918288281 0.32622646257368109746 -0.10434506496765343087 0.27490313483469247524 0.30577237183202526927 -0.17069855184453189278 0.035717583986167936172;0.22282014003538813673 -0.109380039664835782 -0.095358668778698627011 0.28979063294848328436 -0.016194491225502198606 0.012594966410343877775 0.075285873193925212377 -0.23021298107253537757 -0.032857982632489374231 -0.061215390354787319049 0.01211761819535670491 -0.038549361795418748966 -0.0036723536138771896951;0.17213674331787737204 0.78396420078799200493 0.77396137842641254956 -0.26535222880183473304 -0.30746378678710678534 -0.40570385421191068609 0.21681074255920840255 0.79955320953802289097 -0.11158839664155505156 0.28499479367142083186 0.18793259158394109987 -0.022340714761890513584 0.16102388759286995201;0.98486158114368904659 -0.46375162559626781356 -0.86177035209988428477 0.18808109570719439008 0.14129492978744798148 0.20241570329122185457 -0.12815096238374079629 0.016689122876452393979 0.023267916701195507506 0.10128396843082507206 0.11626044371790072995 0.03557326234323748837 0.050669221501682612518;-0.039379923825387297409 -0.35530622593931832087 -0.41970325135159192165 -0.062957897296006093413 0.15970100420780114492 0.20516902359716493454 -0.25537905231790092309 -0.45818022541037095596 -0.064875847230513053465 0.55585034406915523331 -0.10145981830151119818 -0.05784088550503151821 0.091256872655819096241;-0.39281416202982954999 -0.3469385871499577334 0.32900768024734777795 -0.49720783642761834376 0.039344489826545231415 0.79993480236380976045 0.82514734697458758106 0.61778652134773104354 0.31921717346247990843 0.14235872327413448546 -0.2567932975594978684 -0.35715990647984674489 -0.096280466919997101383;0.089155705835065005016 1.4208390366372152247 0.10343862558063590673 0.21496986833371775627 -0.41857228804141249912 -0.036052210002777279607 -0.18244970513242034227 -0.95170300240323790764 -0.030075121878962423477 0.6448393502297428137 -0.21952933721552564394 0.060845462644298034527 0.081552166086248892296;0.41491344642691052602 1.0873635037718361041 -0.49984560252785176226 0.27745187281752348163 -0.82330279250679061498 -0.51832824389975740154 1.2076571152211916793 -0.80896027855990293443 0.078954452268915925606 -0.5615188201196156248 -0.17253257397960725106 0.032162895727331670959 -0.10777916932351144785;-0.47182483168915628768 -0.0081411756602679900829 -0.38873018363277206388 0.86853063065162927625 0.11264863797961775782 -0.14156600407876263059 -0.23897144429844377478 -0.26249254427455176453 -0.23830710330102256034 0.37355262043471892941 -0.57289352041801167026 -0.15759407344189765854 -0.05220518448021812391;-0.30562024580827079623 -0.55665527737626696592 0.16229889760887991623 -0.085735261791590827718 0.43742707906372574334 0.46805295261679280561 -0.41162985731719609062 -1.9871831001412938456 0.097275891534095576541 0.24650045067245235364 -0.1842157226745713694 0.059491823715303038256 0.089793885578647203438;-2.213478913562196837 -0.23317408611874249069 1.6706638397970237087 0.49609460980478375935 -0.20688529589224860517 0.027115559737216438085 -0.20048640474705786696 0.80464139349870744677 0.025650396022030483995 -0.2000610202599582832 -0.25127699525122826341 -0.074650141750843626576 -0.13640725708211604017;0.2558897392739770682 0.18877234899134989754 -0.13580099299488251896 0.15279190091310607125 0.23943764022210051179 -0.057122295945973233788 -0.22008507207349425894 -0.6343837603181271545 0.1008009116196415117 -0.34886059739800423518 -0.066601521477595945764 0.0041594201519187775154 -0.0040096773046663803514;-0.49122252343994160517 -0.25043056158220705631 0.21520768984330101992 -0.0095418431715405781224 -0.39286748596606063666 0.038625323193145738587 0.50807739257032979996 0.16239869728227207535 -0.11130728715747237323 0.11027937674846575999 0.17372910465846275185 0.018698622481894480729 -0.020184532289862500143;0.13305168394048236258 0.30390942617502020306 0.24166906609143745666 -0.61158201197698003337 0.23322745770110353547 -0.53750317497306621117 0.34464552809567944314 0.25634725410009095992 -0.13560197104456186978 0.4685683825186175433 0.046984463602236577195 0.23253660632729036828 -0.25414999426929252291];

% Layer 2
b2 = [-0.4834006734566557717;0.0024990926667797334904;-0.039230109947157275341;-1.2689143497769421742;-0.31116534694907582725;-0.56242651257388542874;0.11378352531837990225;-0.11357894751591902927];
LW2_1 = [0.0049197172511376546095 0.13142962395411084131 0.17853018797745659474 0.56765253628173473199 0.084359509428386533769 -0.19503072999098741702 -0.062002697103586884575 -0.23286049310455392281 -0.20336862604442168534 -0.073259736639707806471 0.29890983214795435741 -0.013103794119278082408 0.096815363951133506792 -0.063356341141739755396 -0.033464301236556241725 -0.18673163275461338029 0.076172091767161081988 0.48164148562291242417 0.093770933901921760256 0.067264172145769351996;-0.14266878843993557879 -0.58193843922808163871 0.073991205477326807416 -0.060542715857812741398 0.052786018131359385697 -0.12357557789054098019 -0.026700343886880084643 -0.15633611206669376092 -0.053435751703740923257 -0.12977056189667388053 0.21335068651997329825 -0.16640400469545077455 0.19098339461321089949 0.069343190164198431624 0.15940947001946087491 0.27001487408017943448 -0.21356901307273998269 -0.067421789023447309397 0.081652324853078661615 -0.032567936980494795185;-0.1022287868845417752 0.076197192275499092684 -0.20901299025610936555 0.0077760519086743605521 0.11489906645940869967 0.28239661569148760689 -0.11823791458073343308 -0.068821012023157643323 0.13193552611837452981 -0.13030698765535064787 -0.083253312456219280557 -0.028444387114830927549 0.036756443003010015602 -0.3536614930903659304 -0.054672847758375400784 0.086597987438825421713 0.29332828206158834128 0.075676368705879848431 -0.074324909693495921914 0.07380879470356965788;0.078105525143421922207 0.31987713131441702918 1.3133363990924853404 -0.15494094723212620268 1.3191292453368985704 -0.19216161059214298401 -0.22658970168185404992 -0.50731597992361632254 1.2789048171926471476 -0.95807607244402936963 -0.23528913791193353799 0.4256418304150103582 1.3409286422070274547 -1.5733009514364673098 -1.0114207168482434174 2.2787613549574250449 1.8036092249367972062 -0.22119664540013314613 0.79697803134296230088 0.74815144057312432668;0.066043246993208973294 0.015284409532267262052 0.45935968484860062455 -0.10398551524971015592 0.075333774525617291928 -0.022685797168450441696 0.10510815515058177794 0.4673920246458254657 -0.23849376773769326299 0.31794762091317613217 -0.057144947477230832733 0.075495080011849638457 0.085663904291506637323 0.30996754219370364902 -0.016423006967599754202 -0.30322471650301580093 -0.11698339597550336255 -0.12713152785503142872 -0.056544313586598879406 0.13803045313395159721;-0.031821434813738558312 0.17461067239391106498 -0.31816001315330993959 0.11428388562582421362 0.48680449545021303726 0.059492243537177177948 -0.079919532982006269428 -0.10357916133546343773 0.36242441592218588298 -0.52523320301703269042 0.14975802001867113966 0.68209602150562254064 0.3476144744777587281 0.0015885730576416104767 0.12254015967203901738 -0.35712726384368870258 0.45216046178631269514 -0.1988051953439486097 0.23340323154875960987 0.2551360601475709533;-0.024851756185091243567 -0.6986912077486949757 0.1055842925402514787 0.0026656492138718962913 -0.064298915886271026943 0.22564196370163533412 0.21269215399560550961 -0.49990236641191138078 -0.073189644055079702833 -0.29220478062415838894 0.32485144637658530664 -0.099122679300705299199 0.061456876008394070721 -0.012031298390071025126 0.061598076703219990791 0.088098308433239874704 -0.31821148389900566489 0.22687786183246647087 0.58423559281400394561 -0.022944936941754777437;0.036175314936507711738 -0.021412205300768975824 -0.17511916838629221216 -0.29486834274200390826 -0.026113143794646805074 -0.19468421437371741245 0.099012611350671700383 0.36870570792802642712 -0.24218734169586378369 -0.019566586805044351022 0.2303076101457452729 -0.21780653858731435779 0.088988830554385320304 0.089981206858097823043 0.056139999411977919985 0.12170089264365260839 -0.49758651241242141117 0.026685420947236103417 -0.3512686780134079978 0.05726636697656267011];

% Layer 3
b3 = [-0.7214294609685388826;-0.57330764143267143318];
LW3_2 = [-0.96343407520809531963 0.54542619574702178031 -0.036483518830057695692 -1.1343191640855052604 0.5586125904347758464 -0.065963881106005484156 -1.0094207415443123832 0.15791319202679596212;-0.89211386732324637894 0.25646635086472141518 0.35149984504415626718 -1.1442090501380333123 0.66487047367790985675 -0.088626402886949715021 -0.71853617966794181005 0.23459734707326221348];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
