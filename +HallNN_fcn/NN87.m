function [y1] = NN87(x1)
%NN87 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:30.
% 
% [y1] = NN87(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [1.99878548239323;1.99936353917623;1.99933975948439;2;1.99808902067988;1.99876529953499;2;1.99823763371823;1.99910348765602;1.99841828554288;1.99864194877679;1.99922444710142;1.9988166120836];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.91532282809958898095;0.38921768406765894222;1.0566928055395756747;-0.058518305793871253084;-0.68166095749320465558;-0.27149404298560841919;0.76114888869897989743;-0.51593514192826572806;-0.39375139481438248268;-0.24805361721225216431;0.42091228029581062575;1.1122034010724293207;0.52272603999158950838;0.019752028988492660588;-1.4064400130305214631;-0.27999617990719566363;0.80814904144795973728;0.10664194561014944673;-1.4403256981060235109;-0.69015933010990804242];
IW1_1 = [-0.44190140294973345725 0.14560837417692082396 -0.54201174563693099717 -0.015269491840898043525 -0.47807478343935566611 -0.0031103205782161899573 0.048378512629720059335 0.043942141737603655771 -0.11978938265461135104 0.025462689167365062937 0.046048005755405040096 -0.12951741534139835088 -0.13120552493021009344;-0.17955331897576351508 0.8944832668712412449 -0.1918124280232014478 0.46450417319777198566 0.047928056234760513243 -0.18278868531387054697 -0.51415890806754593889 -0.39133619187105711523 0.031930566329965402728 0.28861710474768875745 0.19405333733402746477 0.099258806408119293341 0.006475528723381487016;0.96854835897186097871 0.42588817036214188239 0.94431379445397367611 -2.4529787380793499629 -0.11742208622726789391 -0.18345374146026421913 0.17215973567005202205 -0.051530473256358823309 -0.02611109097799958409 -0.015515584230317401235 0.26463697960898086015 -0.030278293696210240027 0.042140310564667715632;0.75346992731852391323 0.16937732228007360002 -0.40857048832205383748 -0.13234934749662538578 0.41114180672506772662 -0.036989565016982514645 -0.53836468096903433711 0.048968066540057211822 0.010165714633482241663 0.075301122113019314241 -0.10086703450440423491 0.0171218065882076248 -0.0023253449467237514992;-0.077686033751399971581 -0.64545278148780849126 -0.39645525905667622357 0.10607836616867001578 0.41547170425422863538 0.35960123583578901263 0.099621497381469747978 -0.28861449145534323613 -0.30794567861672672571 0.50863017439724211854 -0.33715603481918443585 0.39534056344071866196 0.17763923904671541365;0.11294187944551553615 0.4271137638238750589 0.0070565197538362501792 0.27378523847567048932 0.56988049502903459498 -0.21845260320010495558 0.26917778186581298172 -0.080812680999948524607 -0.25433956161307230692 -0.40955620781902429828 -0.24868418586853030527 0.28172862818088290071 0.13122041641826365233;1.7522444542382911159 0.25399812986638109491 -1.3961255428925110067 0.62142924407209765292 0.31027140388574309116 -0.066595358065650978041 0.016852052114925238774 -0.60335025877144299322 0.11241816258635063674 -0.27623423086289083939 0.22492234451717535437 0.12297775722553519473 0.064159589068358183206;-0.61082583940765577957 0.24641867874362299862 0.89696060344364414441 -0.9272567980546383426 0.21558745554999564353 0.44581528757396643448 0.11194160758664195576 0.12894113520306749177 0.30018907881558276607 0.32152547152874516589 -0.024681977555457718793 0.038227992164562275834 0.063414333207355136346;0.1354874745168720418 0.23341631741424354041 -0.34258137161823754013 -0.71128938564716759352 -0.91155846213392355271 -0.38724749311303541255 0.77902389277414618718 0.17563838011192656197 -0.076708662077648190336 0.33279641494727918438 -0.21040987738143401842 -0.004107531880969281235 0.0074725543415161245833;-0.4453632583339361406 0.25771846154496363956 0.27840985497792247738 0.49662187546009939343 -0.40672916394715175059 0.13096325798643404514 0.18419060622650154646 0.46375474467536098588 0.086162660859742098984 -0.55322326616981809533 0.14605958831395932096 -0.85210309430685327037 0.16439675963949762494;0.023346767427502870818 0.85172406218200724659 -0.23876835123789863502 0.28521656081228796698 -0.27598557062075201873 -0.62526811841722540475 1.1635483953136176449 0.90450099170147624239 0.40893905434879646021 -1.0704436381291211333 0.19898366191678215631 0.14137986811766853346 0.065247727784849288146;-0.3711573146077210561 -0.58832743174555079957 0.42693849916353232565 0.054896692187931160622 0.65555471893394012817 -0.28207292505731845766 0.11802405171098848125 1.115151526884182509 0.07562183808162913079 -0.92615320945832779742 0.21364045060894926165 -0.014574053768274338252 -0.033340431975901800576;-0.05036883605273448361 -0.18772976771498894877 -0.40963301181741496038 -0.021536789568333776501 0.05791853573100785163 0.66066660719972603033 -0.018991415874140899628 0.024085193538444717165 -0.20089110188470846174 0.38197252274335535827 0.010014985581206047385 0.30233230696990776032 -0.00090298461817165526222;-0.3004324368804245915 -0.19408609853644087639 -0.026019997774014102382 0.16392024819051542739 0.38159400653027469863 0.078922007449229072962 -0.51105795880809723464 0.097501839624643288351 0.017568240447896902451 0.042065468422394884651 -0.041316668309254324376 0.017880013718549536 -0.011769851517449001627;0.25969468070111595415 0.93364675099812655112 -0.29599833996849927997 0.33135066423637909994 -0.56601326940647833652 -0.41945980007001754108 0.90585682203347761554 1.8525498429822893076 -0.030315428222492151605 -0.58805755555351768571 -0.27852907782175806428 0.029991772608568053465 0.021373058867287561546;1.0797659114930615587 0.54844147849752189483 -0.88502425748015267626 -0.42262474286511614308 0.046290309531914208829 -0.19211666192501158923 0.12914542589289076946 -0.034558963574677449559 -0.016819709085641766644 -0.0016903300921771973863 -0.039201127979042044158 -0.037713628980179624006 0.056293629358693274278;-0.0087637170882759862084 0.16343309634525718388 -0.25310455695103367679 0.31989924041392181486 -0.68493157670467330611 -1.0072505131783404675 -0.408273141217439961 -0.051801672216282956818 -0.45950217414686173045 -0.36944541315923823399 -0.046040412489414483943 -0.0068671050796408833819 -0.19497854991198654284;0.93465503175446529305 0.52980840960193231748 -0.98042514064114327788 0.20703709978549283965 -0.14870667058015821227 -0.39091492790585247175 -0.15449776081492166968 1.4190620377664893148 -0.11479172209155240336 0.42648106263031138052 0.39508805135235991468 -0.063799776586036499593 -0.039597225149161509317;-0.29371262696942723736 -0.96514828404555552677 0.33629154213073580992 -0.29459589870253766186 0.86134928134502464214 0.35940261493514830127 -1.3768261118888605044 1.1981467184532978987 -0.0089712500234746112016 0.80329286576433489575 0.16667838733123938044 -0.090166919227749234289 0.086869099776486366493;1.1484606069985912047 -0.88220882740954309487 -0.59753406255379293288 -0.92642075158797720924 -0.13872019798761020537 0.60755678170045823716 -0.2436804853881566757 -0.20129532929397900287 0.072767742634486584641 0.26459682467997996946 -0.49528243127722204608 -0.12405399731925131901 -0.18139081478907334577];

% Layer 2
b2 = [-0.50799570361565216103;0.080588050884076473102;-0.15637110361601441744;-0.35494205661192523849;0.11071068730623366549;-0.87506067428198075486;-0.13532659199949229056;0.71582920581381015435];
LW2_1 = [-0.78047092306088627911 -1.0856824677142262736 1.6328551467950354059 -0.81740798460931862746 -0.92116443131979963699 0.56647547208896309456 -1.8559726019078830461 1.2592628079639345273 -0.80538969954747330338 -0.64775545161533809591 -0.69411012757616841196 -1.0518952485431365407 -0.74441738631116349811 -0.70899058847254292637 1.6188605436349623456 -0.76086277634939503134 0.58536395967588872313 -2.332186871152837071 2.2379832250186493248 -1.2935365033451189376;0.43859351600257651116 0.12294312791735512169 0.22624041768144989573 -0.331029893490017324 -0.15680004697672653147 0.1904586685176401506 -0.10088218373295385066 0.1613609134285370339 0.16587571664486081002 -0.055783545449301447094 -0.11646009360151179934 0.22602288825442246045 -0.057075892132922266542 0.091712067023542939714 -0.034828785831300529408 -0.14826420594430012034 0.046471712296929201802 0.17338815808341764835 0.17684652631655775612 -0.11670007342730168154;0.012734321543916012759 -0.01462503759469685298 -0.25821792181274705325 0.43854564587561539746 -0.043206672141751709115 -0.044186895696467838601 0.0096370434359813531011 0.1554777294003161503 -0.029116448861750014732 0.013230454673989288858 -0.099936228169989066439 0.29371120535938233242 0.020185280795983261831 -0.88389122583220069984 0.078974228775925192636 -0.27408636495327104443 0.097677689116730470609 0.12392466094952275801 0.17782580847674789304 -0.12437582889867004887;0.076369299584992486607 -0.38868245483660046613 -0.060368419547083301824 -0.42974015624084244136 -0.47339687607763925037 0.45014062653103442679 -0.5052223635835159099 0.17017774969936219631 0.00090323668302809325542 0.015888959077046318352 0.44024040404951741978 -0.086087627894664509043 -0.12300739554027494138 -0.37330968968654948403 0.4001968537545749216 0.030589956953274360235 0.41091511287026499799 0.42493864862303459828 -0.18839038778068867286 0.31290707575304488319;0.27882774553264488837 0.15995676005517939222 0.21048107965062159974 0.11075085572158897829 0.078136427148326345615 0.11803090449610209589 0.16045822822649558059 -0.45183644104792342056 0.075896165866613116147 -0.017412405408192867251 0.19932603357972489277 -0.60023311653485722506 0.010828889467984249839 0.16771191745573593712 -0.17508838061571727063 0.21973824205375189211 -0.33307578152806960325 -0.00035882658736262687538 -0.44384130676973770901 0.36258412825656094469;-0.5821592257035458351 -0.22082207555779673203 -0.41583322774294134705 0.13648247677315156201 -0.2944133452844885368 -0.088482423462291182048 -0.47657635605066045459 -0.037812618162231137475 0.50460138872955073719 0.29258864843437060177 0.75624745273350035824 0.21725883358214534424 0.36697947654367651937 -0.10567650990032430303 0.18323514332898691026 -0.19645602282236487857 0.3036208173529124088 0.60837089521561160677 -0.99858370297368836965 0.22746446715895715651;-0.049577506625551305552 0.25630601312140982584 -0.078822145878954030795 -0.60601361205087134199 -0.054655412819678242387 -0.0073501654797571217004 -0.18719914299197218388 0.47125260810595070993 -0.2662606892315483309 0.094412814635622746562 -0.1207459223464099618 0.47476863976233218967 0.14742970337171329431 0.13146106365372947633 0.27001755694563811527 0.59586651056774808666 0.26025500044746763262 0.13996076556240374944 0.13218582722300564747 0.0125225371981101119;-0.059311657742683328298 0.015797338634391762391 -0.24465842386089900473 -0.27384491975501729089 0.086049088126817011024 0.073839464813645283581 -0.82890542888713636405 0.29878776625042691162 -0.4082559196666449286 -0.10713386549629029532 0.21628275304530189538 -0.39448371408578858377 0.20347288397144142058 0.42117971421114486219 0.20069695940428122771 -0.56850540308581010152 0.26071534892301079234 -0.15615831132408913851 0.79114751673140870647 -0.72630341426699707164];

% Layer 3
b3 = [-0.43502745108729973245;-0.42959145787485453205];
LW3_2 = [-1.2862045541191382547 -0.87178475324307569405 1.6850626017981860105 0.19237928370736426253 0.53405748709789402362 -0.18151211222521526634 -0.12260909519696892855 0.073557840942922850247;-1.2359268737230950652 -0.63367983690166429511 1.4180096274765250364 0.20020947143558928683 0.29139884384273984086 -0.1603225822386658006 -0.28932948961731824733 -0.00705598929450814219];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
