function [y1] = NN43(x1)
%NN43 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:28.
% 
% [y1] = NN43(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [2;1.99855752755857;1.99937568396367;2;1.99811267593228;1.99857032198814;2;1.99871579687733;1.99874390969213;1.99957540075764;1.9984583955734;1.99815504493645;1.99923758176782];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.23229852465842784626;0.1919388985885845389;-0.063125524289880163842;-0.30231551126163291876;0.22173179207654064582;-0.013719350207532687164;0.65502112110718269111;-0.37255650586611949171;-1.5192407720939433702;0.060051452485416531579;0.23565260014446753889;0.13590687059933923009;0.85826060646340673888;-0.24648959817111448789;-0.31800747890474517776;-0.36856603038899282687;-0.025593542126360946387;0.37829507324914335431;-0.41620794311126957377;0.51844186751170162619];
IW1_1 = [0.015992970105929659591 -0.27646172045084999036 -0.58009666945388427273 1.0408874502939646778 0.48442885867022889013 -0.064496422949497811405 -0.69715472906139863696 0.13664475468611567144 -0.17806378512216267107 0.16184086022668062177 -0.17244851005220673823 -0.029109510996185538473 -0.038149767955934124619;1.571642866594798793 0.16557525786913271371 0.34577263580710349 -2.2769088888587321051 -0.023709945809580131731 -0.11396882930106151666 0.076226665177940036711 -0.35770903650100466242 -0.049168841301716934011 -0.076234725479263673598 -0.04815158211202008598 -0.047074159150798211559 -0.011351080222516209822;0.2544228600647689964 0.61043582776518423572 0.022183655917164118998 -0.07002867789637670648 -0.597537397855453567 -0.32999712509703205132 0.55607068146982430168 0.17697351921242979178 -0.020550781437677825142 -0.32601061060441710593 -0.037689104022857973508 0.021756023829990138452 -0.075483305559942898144;0.25836357766160605864 0.62740852033617766637 0.74510064032101519516 -0.468679538451959532 -0.36286097868089955965 -0.41365498541501166674 -0.024344797517223092098 0.71525458342996628414 0.046152727925795188069 0.041459317653527345826 0.16930719983835357256 -0.0092245312172492370528 -0.04760808102345556736;0.015812724625959451163 -0.25276588755002882269 -0.12173725848496837199 -0.32181658273527907754 0.57498991124483689319 0.066809669934081161724 -0.78510487803060202694 -0.020060724705361375475 0.018574059512812355482 -0.079224675148515444345 -0.10598035263263455574 0.031835233190533364367 -0.039659977673851265489;0.47868342964144755536 -0.21225537512838255072 -0.10223697664459141521 -0.085349534051693640158 0.058858432695527922174 -0.018826255180356386149 -0.0047480580257018073151 -0.059939300731724556859 0.13253478653337283366 0.02986494692112447169 0.06347504718347739272 0.02458999022027368378 -0.083869955502629947586;0.09576588425616068545 -0.28241867401632175794 -0.59461414535078038757 0.32203532540008183993 0.070088876472130259843 0.25108791341626512938 0.23992767134248477179 -0.78406319743394825572 0.23686841572106165366 -0.44092409121885584034 0.13144093000005910299 -0.034778903063380849081 -0.025385168704123592387;-0.17612974718656709827 -0.47271798360688821461 0.44399467978020007441 -0.24660315189770684596 0.2321600469087098384 0.61187338517514811009 -1.1614110046179939584 -0.51633316307272525414 -0.2596523862166005836 1.2097673735674596696 -0.22672377970951920756 -0.059728930588997385109 -0.19028548563438660302;-1.3382631946867162842 -0.87798638138400042497 0.98144603106357686251 -0.81847880122549676596 0.096295928667202129736 0.19484543226088371637 -0.13989946759382682062 1.5005330469182629471 -0.22759169037058621377 0.31163716498057780768 -0.73262565613820151977 -0.22633200612551640507 0.1745295911718866555;-0.061030972339035649554 -0.55770006304473496161 0.034347048935053345331 -0.17408128876502296234 -0.078938347933225461173 -0.17541565761079319641 -0.69482839141408170303 0.62626838575681442745 -0.23614750832425496219 0.32586645527156793412 -0.0026103173643499746892 0.10812596706905969191 0.10109693520785294207;0.27472327711261829153 0.0053653973495450578771 -0.026392503596466759114 0.14708862379796705522 0.41607931186547053581 0.10197190550574862511 -0.33361596582713037851 -0.1194401376371421325 -0.080877524543281370528 -0.089978203435411838185 0.084002938759420942016 0.040860872234095978184 0.063729954283556281003;0.17270803820255156702 -0.30705786403993190481 0.05492523124976619181 0.59971740610592294551 0.023059131508514636721 0.019663467200779848054 -0.24266004336230820315 -0.22422253336718950267 -0.046421171409596347079 0.035291929822773168701 0.18226748853304608478 0.026576392349518633551 0.12031986347655396208;-0.24513824532102043707 0.83034139816535390555 -0.55824051075010105993 0.62023702362587262993 -0.90603181503870489077 -0.79216472408546112494 1.255407503001699121 -0.79999348209228993145 -0.18419608495737999077 -0.71218270774669401035 -0.16147711763784944328 -0.10439977370521016931 -0.15649347661463039461;0.40337687098282259957 0.60564886156198927125 -0.037248977082917529569 -0.040452982570676532248 -0.13271633497377993693 -0.67701347583838289435 0.84382374391823256055 0.33928592766519549695 -0.055241367139721102297 -0.74217016812650205004 0.015796582697003746371 -0.31408307719068678798 -0.055039253313226559061;0.17052200641738568532 0.71182331035345536296 -0.26205424901617191402 0.12350914154194636563 -0.17834481874467533746 -0.014763261237608809109 -0.51073359191733413986 0.019972027546867547609 -0.085732184911076925182 0.9550241852435046308 0.23633545311494105756 0.077705463506890726233 -0.023646735492790095512;-0.73475977634714262354 -0.32557483909670820177 0.68130101553365873812 -0.30273117913814212576 0.21173129604626045319 -0.10205768713013126103 0.064207500511220483297 -0.23615461512325808258 0.057927538575699828727 -0.56020313602623417193 -0.34840522346739799531 -0.065736778447980329099 0.024354084091386798971;-0.38016818289774018114 -0.24762456528284115809 1.0254477855720818269 -0.72806225984637595872 0.13150085393969473957 0.33454445665920390374 -0.46876189602327100747 -1.7870474022568452188 0.10295006553123560444 0.25420510347370789406 0.17252292311188605067 -0.0084959579248056853185 0.060224742256393438977;0.41404281187430613809 -0.13153488406598248806 -0.58881846072454580021 0.68112273031987025096 -0.29385976024071502888 0.1481169151946775675 0.10413638502191258084 0.12814111444632186876 0.11100663015512979293 -0.014775514385995254865 -0.48394886751074561726 -0.14135932438296322511 0.28693088079094614118;-0.75642681241710008067 0.18280860304199356148 0.1835309180077241975 0.1440384708776960565 -0.64254933240271927541 0.07363982966987034362 -0.12589318086308856626 -0.36376356655655173178 0.2124070529654680517 -0.061418602048100866264 0.029523172188183982589 0.071289916188260915586 -0.14671251938060331232;-0.42652112386511659148 -0.36707585288338362428 0.0046552088540599105559 -0.2674300093680372914 0.17827318005611930696 -0.046872203909645658582 0.15262184076263501931 0.13007395071057115121 0.37212638637847877954 -0.29519419169227051336 -0.03434448582358848312 -0.056870351007030861545 0.060662629862058767283];

% Layer 2
b2 = [0.040103008890075356185;-0.070063714218841374737;0.82533630131884661019;0.23289297472865211347;0.069483910096629603048;-0.028226399057660941233;-0.18982074824658917711;-0.43993642882767802771];
LW2_1 = [-0.12022005250673077625 0.1161423782311036268 0.21912931006679869927 0.36581885694077542759 -0.16316992730469825901 -0.012138899799752609493 0.27300728628482173743 -0.43882025090419946034 0.016913749480073122372 -0.28629381017475874494 -0.1200623969504186761 -0.10827595454416577558 0.60285999644143273279 -0.25228649060545421667 0.03383716693106937623 -0.043793526036377039556 -0.33200449856571101481 0.21542898544578581443 0.47160476168347270631 -0.63751659424041617896;-0.080014927115346662356 0.049753827057788233001 -0.44721586584225786476 -0.036676033617842274115 0.22783079333438602254 -0.2980154015838805126 -0.072454256683980103326 -0.083511504276879727771 -0.38648437498028881398 -0.097628846719570783197 -0.50221451975303432747 -0.16077814512434976391 0.23399698793230977456 -0.21812037134169851016 -0.12283945261646279923 0.17282877899741797001 -0.010917743800376172175 0.095496892210938905121 -0.31315077513227868033 -0.13727836495690315388;1.5029220626560721996 1.6986135919856182319 -0.24883626367068692464 -1.5953844470544660261 0.23517302101604967146 -0.047456949254893521228 0.95950706651436079575 -0.59000418200285753567 -1.1162535736455896362 -0.80443608230398411241 -0.22931488364633373367 0.63922302010578269105 1.5074752997509541785 -0.62198949421649740721 1.2392453193108925458 -1.3106645772491309909 -2.0471101211439282075 1.079757090717533341 0.28441395258808133129 0.046240399067782850251;-0.21609449420529808217 0.2298483574037167021 0.040781983488036278873 -0.26764164654843797253 0.28105451530356928558 0.11565037237051462027 -0.19804032094793996843 -0.082015153457395087444 -0.40710771645353310833 0.068908079122639548375 0.35557408604307999545 0.15298749938522279712 0.42331434230128650587 -0.15733853196168823274 0.45621840203533542413 -0.17757661775511610069 -0.16217652481790434393 0.29009426478351985068 -0.14091774927423691977 0.20100367257827209122;-0.14279955713229644521 -0.27738009016627701575 -0.076635007327939971833 0.1848792904679656679 0.20947994226704449994 -0.47909308074619044726 0.11346214076664408454 0.15833856865199227859 0.033380950929474732802 0.042326344647077435157 0.28434479194867751106 -0.26446689429209502276 -0.15615385136157666768 0.0058329491883272075944 0.077923501277132156684 -0.16519605860311228906 0.11598572677708046674 -0.19321706444210776099 -0.2772905416627185482 0.2141582584922579191;-0.049433288596380429991 0.019997486555507988648 -0.34606008691079009898 -0.25004873145972394965 0.14871408537988162202 -0.45886049000265438647 -0.0040761374436696154455 -0.051056428418194722829 0.0602445741991484221 -0.17122801293069300765 -0.24820927274865287049 -0.10153239794909275917 -0.14159888143485979684 0.051413088248704087724 0.025371187776150661009 0.31515719539479292166 -0.025770839922448156301 0.016638254741786630275 0.25585662300941053315 -0.13142047388589028767;0.14127605801534637298 0.3606722568530854045 0.080497644118686886849 -0.062156273429793677809 -0.18562319795284168422 -0.090462085488341614781 0.19014101923079776424 -0.093347450175783316939 -0.69392198505333491099 0.15304204290054784776 0.33919032432933604593 -0.32581140346265574648 0.43481356430649148459 -0.36331719781932592106 0.41884882559582220507 0.22814791475649592867 -0.23717633189475975652 0.49914830649404967611 -0.33753855647822611497 0.21957011696555178704;-0.047266837818488741108 0.062821852000178576847 0.12901088957549103342 -0.19652003452234700909 0.10700557837809686335 0.42573947476327134165 -0.26379729016437697409 -0.071298310935334979765 -0.23665796566685015634 -0.30148796439800529257 0.36886176241387308439 -0.32810551131407927894 0.19513372023252387177 -0.17153888517197093955 -0.15193018949700284881 -0.25842940121798019248 0.047186818975156877287 0.30228028570670145703 -0.14235663378710419757 -0.38188779871261335774];

% Layer 3
b3 = [-0.49728148402813637796;-0.46874361069606468311];
LW3_2 = [-0.23244212845715864213 -0.83574504285805506498 1.2914102951381214446 -0.94115858559828269314 -0.19639328134519024038 -0.36396030994584288587 0.59568001848608265192 0.65278778238856127736;-0.24471579190744222054 -0.59262362640980748019 1.2777143551782348396 -0.73100847933631352138 -0.39843184564537142967 -0.44611189676255658121 0.36278304426101476432 0.48224600743704293393];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
