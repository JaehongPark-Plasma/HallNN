function [y1] = NN31(x1)
%NN31 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:28.
% 
% [y1] = NN31(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [2;2;1.99967938196398;1.99897299519794;1.99817974554272;1.99822038197541;2;1.99823807533189;1.99921911400514;1.99839453980943;1.99844173447515;1.99868669777615;1.99961454769317];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.39618202332605911842;0.24226658664644068475;0.025057479010442494649;0.47609081757563392889;-0.20831393627285382797;-0.050709716934679953393;-0.46012699078938884556;0.0873536978723282731;0.031034416648880513989;0.42808678678195688505;-0.25936729454574469766;0.57467147508227278685;0.18217045164954173697;-0.80939937478081325217;0.21901460878854564496;0.29442857690744805854;1.7226802635110749495;-0.81485006364393108846;-0.18081735669862769589;-0.44250480469842728981];
IW1_1 = [0.067731397748643493162 -0.096025378778486145115 -0.10618807703064378489 -0.24055773426378698754 -0.15583162531446645427 0.11048874274355977021 0.38071824253357483547 -0.0044536896154136551909 -0.0047786465839147083609 -0.091148036783923649939 -0.025726036631228396678 0.0088790571641028503275 -0.012345821413035619474;0.75999556965986025947 0.084474858084800083513 0.15541952094021263542 -2.1567687669840505116 -0.1092947560386964001 0.01989552412852899077 -0.40563925987312315913 -0.056805850191900916779 -0.21939032810988309818 0.43822603485546501867 0.081438364389210801675 -0.16393579483966558286 0.027286840920466955834;0.20575645894946367753 -0.059469484617458281961 -0.12963661838971432538 0.075783756893414530587 -0.089747353898085316382 0.31585321093783408353 -0.17664003339606798582 0.2151512075768730603 0.027367783693223780156 0.46170848337103320702 0.17891601886015170986 -0.056241980781123024347 0.039885504441470667758;-1.4389140981408683473 0.53163668623524973356 0.27219208059454541582 0.06911335490752001931 -0.049597718134731440254 -0.70412573678103018704 0.048485278877448072243 -0.1865606204764614362 -0.20868982564841120908 -0.0059328438775537043273 0.08755587229472829025 -0.12715750301830650026 -0.069232726888888401762;-0.0130922265514030918 0.45412391685829262 -0.10463704332630485716 0.25017629173030087042 -0.50836900611810997841 -0.28076947192604728709 1.0370958436694395211 1.8858156439317228514 -0.0069558018298757681025 -0.65508210298893887469 -0.19530051685901916869 -0.086614198136349032642 0.0083944604329717464192;-0.38239158940169248879 -0.22461784856837921365 0.17076636449450399713 -0.13964712939916204548 0.26513474870703779285 0.035305445775559184118 -0.47849375140174693621 0.21163673482578299057 -0.020984771902548420702 0.060482510448617535226 -0.10078265372331289551 -0.035814015935610232777 -0.0048085618670599683533;-0.82524300487491819567 -0.24031882331771922678 0.31281574822229324395 0.25060393033329642076 -0.11145682626291936179 0.17797950480298183051 0.067183207861369678704 0.016551525579486844886 -0.01222313625272618276 0.34400431183210966601 0.29524605053111685482 0.015568333662288708422 0.056266972137256024422;-0.37024745239313205936 0.20645012376215204908 0.072499709123559297197 0.028018998174541807911 0.41156567830263662833 0.062731281637230906778 -0.57888630706753796407 0.31447815830413616833 0.0216383553786256011 0.16833421814760587965 -0.02788989234537439868 0.0064741250167169236973 0.037460494383827681875;0.21697583062087005823 -0.37275026639011715757 -0.80880484669688790245 1.1527767059606945921 0.36594875225206391356 -0.17295262004024519742 -0.60231037638522066935 -0.043310863475422768654 -0.24193960729202451665 -0.052019748901739840119 -0.15104691059515185092 0.051812472174791728008 0.016042140314777249277;0.066308734793386073236 0.95846560971986682897 0.10382348691149234643 0.13819983645372183045 -0.28483733993903875836 -0.20381449696805825633 0.2566991771393574151 -0.34897181272546762276 0.086244744285799840311 -0.41800198583539360797 0.014715124441148853124 -0.0010582709651154298923 -0.10127826049706405154;-0.38812776754478661712 -0.69377405685010251624 1.0934042464448656684 -0.481963306927681856 0.43673679802563308838 0.030991932169480977677 0.025971497996680085324 0.30387975073769152301 0.16579257546698117354 -0.55349937283381833719 -0.2632443689157051292 -0.045960771804898006843 0.03803016307577476024;-0.48929451091016934461 1.0156559949558408018 1.0867228731523326246 0.27600360910043580942 -0.26196103101015788539 -0.50334141708058954823 0.34688540792531230572 0.60172053898784849668 -0.10462659654283025523 -0.20222390215942809277 0.34647075327552018242 0.033709515755898714073 0.10025894573871838023;-0.14739104804626917966 -0.59151174317583565809 0.19866842074243365457 -0.00997620936801568714 -0.21641044486584268269 -0.20205596981097934117 0.31440732982825880804 0.24266744049059654764 0.1914629248171454412 -0.037435892021923058981 -0.18898799877076699616 0.12056094747285603375 0.11873460460968809915;-0.74275596321314274473 0.58506230456390606598 -0.67755445739906627889 -0.55907628453364799359 -0.25073710616681299523 -0.10269850874421442011 0.44188883612287721547 -0.31955850322574119726 0.11304945304314586996 -0.035052033999074035109 -0.3569787488885528548 -0.27425371425550837401 -0.067183077751965955549;-0.0024421591750554000333 -0.28676374029157547518 0.40898623795553734617 -0.091506986204706666777 -0.47262609345851569476 -0.5133219836924010071 -0.12274001493720708422 -0.10704662586498667198 -0.25540834448865501471 0.19092616321531044599 0.19035595847633465794 0.4156450383032007645 0.26335720114450839047;1.3091396738269089894 0.19709973301346611629 -0.94850632251950761642 -0.39260717382978815859 0.51869093970061908028 -0.053855529884152819609 -0.081742732264354370231 -0.43738659444981153879 0.21298141240062812285 -0.040199807512565514933 -0.11069006699048239417 0.1881114063295994121 0.32722249785999668603;0.80614373898268554264 1.0943340913519894464 -0.49809431186544139702 -0.23145876844784171733 -0.90113098592584972568 -0.73794661666577143766 1.4793489144536773328 -0.92862367517610122647 -0.027428212305762957046 -0.93863509346534612643 -0.03329512159660683035 0.062817155908684307875 -0.14707443803523476133;-0.0068180360996552887703 0.60639741267470259611 0.24584556392184775397 -0.10491705611115746677 -0.23643259750807674169 -0.48327612432357297534 0.36365461215027206077 1.5448870366257685394 -0.059353447393933077281 -0.34055765528080456095 -0.29621581729767820779 0.024098431167428782662 -0.13360936658907229813;-0.402132212361241137 -0.46816655637856408045 0.38544671237732536229 -0.10959208819826406212 0.36482458964025049619 0.46457411977471740894 -0.23666656090881854624 -1.2135764070840895368 0.11581363462241646423 -0.41725726831270332218 -0.37020185066828709131 0.047789731537715866849 0.00053661681932689383329;0.14963760043882709527 0.19321899877797715783 0.44787135021105989319 -0.30416047722001171572 0.072684631487573578279 0.67929086698525831256 -0.086213232728201055766 0.37758598869280796118 -0.058257151975392988674 0.19859812683347233264 -0.18838945779605695274 0.50904594237306755034 0.35594019766012757744];

% Layer 2
b2 = [0.15262511708534487465;0.28710547260835767025;0.16175403922258838052;1.0447888135004821386;0.15753561591949197251;0.20154414587667818237;-0.28914264962638891454;0.16055840424430700697];
LW2_1 = [0.13863100455165341951 0.061367739527497577878 -0.17815841837827958716 -0.072867986298076573015 -0.035361113295078211438 0.11825451047013996186 0.080787870825989746559 0.21470246599106804219 -0.20459592202997570198 -0.27020788491862846037 0.11156429867297454339 -0.020753699839439244262 -0.18592105406130049472 0.12438409103239567166 0.15717690433458089694 -0.024968177525135235029 0.47246160368280226693 0.0399967914457693835 -0.070680552960103670834 -0.036351309068387759049;-0.12185670980832552512 -0.50041100547202765902 -0.09111399524195457067 0.48288821148570748587 -0.10194646429526665887 0.19134467896451523572 -0.28110020977784261342 0.80963396727205183545 0.040155623092054816559 0.15631623678993125659 0.44746109678904999463 -0.20330150582313019636 -0.71091266061875468818 -0.74015484463075775778 -0.04477623690383204097 0.18179442481080151928 -0.25222373107028167594 -0.014684161221434443093 -0.027456142244788962758 0.1132110572824002459;0.53572462060116587956 -0.33479649439798048194 -0.24096882161356644736 0.2070078042973483301 0.17955502715022400584 -0.096612659008191187349 0.054660893041589275754 0.38431204528602513903 -0.114148141718243612 0.039470500738364069915 0.035741613226658530689 0.12547966235650834244 -0.081247725089286487732 0.10215503734183470352 0.15769969478534048846 -0.30445896009644163316 -0.42900368461563487266 -0.062470369948490506173 -0.040693268718107543369 0.063407578597860711489;0.0046452476091220860216 -1.1917788106319924246 0.61576385085829032917 -0.89890347724822972086 1.3706031880329483386 0.93898464609256537816 -0.81715837934980006807 0.1837432002948209131 1.4976583995260694948 0.42140331970996031119 -2.2003118600579960606 -0.97261592680949848777 -0.048492885681239404627 -0.28975954480464771734 -0.36239944373284338486 1.3410341528020914836 1.6866478110227567377 -1.7845984229384133091 -1.2264505792450866029 -0.59328003398087081344;0.091217527041700843804 -0.47280019828517605429 -0.33624966188989990901 0.25634178062348705884 0.2456727968019216668 0.63919217672455630463 0.37948092467946969997 0.075007294526940271329 0.14544016249933572338 0.2307748234681216426 -0.15293533642529016925 -0.098736687899838068705 0.023670194275901657727 -0.12034476384552302008 -0.12639053109460440805 -0.10326661023463021283 -0.16320395817445856879 -0.23040807586075343072 -0.095608361956345117028 0.10106549183474262954;-0.32803656914973566838 0.047297144075234658078 -0.0014135187364227150188 0.035721927163764266577 0.058858409636220493377 -0.39362904610783600035 -0.31418996277699323683 -0.47096097235812195425 -0.22090510449712777441 -0.13852004565173356432 -0.0042340435026057832157 0.17623538590750609245 0.11002508204204279607 0.11758781587259188595 0.076886895982058472976 -0.22558547022932279313 -0.33330445760176469205 0.034621304177823844506 -0.090708264265099022849 0.043929363506544721885;-0.14962063938251260464 0.15772840105796853694 0.082425787253990606684 0.22805554319168641619 0.32757156353122612868 -0.51932917965280345207 -0.41110355892868000183 -0.29444110275687224165 -0.14203515413288830826 0.086397533414181770794 -0.23815937692767985556 -0.10352427208262127145 0.14562243208058603394 0.14710774617400199094 -0.0057526355409345695732 -0.16879062617580922745 0.85501371976954343435 -0.46645932027348085969 -0.3468486541805546608 0.011852860385595763437;0.086574404139178565143 0.31122266283764871142 -0.10110943638428607216 0.11523089525580665349 0.11994599438325440066 0.077704996249885652237 -0.14296967926042947195 -0.61925779119409574136 -0.47059253598929373652 0.21715022740116526889 -0.099373563194019950973 0.33286471744209622514 0.30993148632311096069 0.15244364622846803825 0.11180914812593162333 -0.25641448685107276484 -0.4240251877119731172 -0.087868985822336972968 0.038377146319302772592 0.013201749576980972151];

% Layer 3
b3 = [-0.65734730701266230746;-0.65416875595088663786];
LW3_2 = [-0.87590443833261810713 0.1677226067853094249 0.31676677540193654004 1.0807871787184601953 -0.7453903680480605809 0.81003417058246152127 0.36654382467699064829 -0.65184391372039773849;-0.37740190690887914782 0.15158075025036291117 -0.1504644277131305663 1.1223146562891137545 -0.3077139472527515851 1.1465894516253651858 0.18779274829610770325 -0.56957656756819541322];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
