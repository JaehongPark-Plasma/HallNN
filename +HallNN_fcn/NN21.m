function [y1] = NN21(x1)
%NN21 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:27.
% 
% [y1] = NN21(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [1.99839505120707;2;1.99918735934063;1.99974504846657;1.99804255407079;1.99993860279269;2;1.99827827389977;2;1.99945669528647;1.99818776654794;1.99908501023814;2];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.12728328815701228649;-0.21517603567009246923;0.1510020894193705443;0.16516763682433141525;-0.12912459683439936331;0.14429283218289820634;-0.009729652850810711906;0.4856852895919219204;0.66499977266025334099;-0.33734710027485620421;0.33492438795172707611;1.1990423795493843073;0.73472568579764219177;1.2447691146327248823;-1.8953269673442487697;0.2002689491824063972;0.63308882247007314259;-0.65632452960402110076;-0.18754714069983791092;-0.90044547866579938145];
IW1_1 = [0.42705432345694643859 0.0063162259709641371819 -0.21644504450922300021 -0.99411792794532194417 0.45989981372194166376 0.016032224419941648597 -0.42511970006305316305 0.44335881169342317154 0.50634224566743535334 0.26265797511969896094 -0.10785522800059112181 0.162881743013912339 0.27964628299386001808;-0.25285441124601387708 -0.21559120240788390288 0.18055244322509395039 0.10849515472143862749 -0.020424883486465022359 0.66953242325759165787 0.10050017385262924319 -0.08650157478296088831 -0.15540666670274305705 -0.047221858314918083166 0.22934633940989751499 0.033322010391254958117 -0.3118753699315928718;-0.53270207367578803481 0.15261055051667007931 0.30409110334121342012 0.53229719050153101456 -0.22451309681891304382 0.041526324001754086335 0.51943333030181260135 0.13377155073260849072 0.23628761584795959783 -0.4933042607260991752 -0.79800792300710376992 -0.003184274039564818394 -0.12105912994745345046;0.11321637457555230877 1.3639513979521973308 -0.0035909555375130807614 0.16474049350437272587 -1.2153729704151301494 -1.2022946488030303858 1.4128374053643069086 0.75258694824592597961 0.10898368913845273009 -0.73201782537896198377 0.090366679028042198873 -0.11042361255790060504 -0.20325156302688934806;-0.15058186228194300749 0.069540205262533349995 0.46171968164487553477 -0.96957576790166688507 0.29010362824961188899 0.17924717116737162725 -0.2133708979518792459 0.32230639500903812689 0.05174122728978580027 0.12565274582111737867 0.099279971062116598168 -0.030765524679252122253 -0.015802545040715196278;-0.7748031152455288062 -0.38511487300315888627 0.31153952269601159486 0.2148502346913178096 -0.064715980799243372212 0.01395175565632985476 -0.06084373185054083033 0.5499921628605695112 0.037803522215368437487 0.20286858970564641824 -0.36737078737587924859 -0.014619398343077818353 0.02484381100269731496;0.76526353239365563219 0.29095675087732580932 0.040377988043179838251 -0.67699661135303212944 -0.022558895896447637291 -0.18334923341399042562 -0.037334210616060861665 -0.47203663883008267765 0.012758733187734929565 -0.11479595292894255454 -0.13742143014692387304 -0.042843083804374335055 -0.067189843904974344557;0.2699809464269394832 -0.73483113698840452077 0.19109773202939669967 -0.36330348223923275564 0.088799574259568317403 -0.19266006577438785086 0.5871162933248741389 0.43165603678137959287 0.017922701311455260104 -0.93920362125252909724 -0.7143256262193951045 -0.11104957573942068894 -0.017440643245692787761;0.78688597362097845167 -0.011087141082356052543 -0.1228790950729451853 0.53537434400096461928 -0.35061059636068792056 -0.5280487674953677768 -0.51101791232435567203 -0.019424357539453436516 -0.047165110642012023079 -0.65500962365005988008 -0.27538963818037542897 0.53715227222474715152 -0.4362434608002937475;0.24553663180037341163 -0.35770538496608417223 -0.21145561070910462442 -0.70497425425639803631 -0.38504537781874370594 -0.17926688156041292732 0.35216896408154152454 -0.36282509773753102156 -0.071670211834773886461 -0.1298641321710137797 0.098221467239749379874 -0.050268318621478388919 -0.062042773803150826073;1.4464058778422692608 0.011078142337207309842 -0.99935652726884116603 0.0138619790584151234 -0.025419337960698645817 0.42314877961550045882 0.35291899247653618632 -0.92406202163686834705 0.04833690780946352239 0.1055147133882075039 0.34258210993502641317 -0.047743947404281554536 0.08456526114307363895;-0.20512061086829849743 0.29609920333995959352 -0.24332639685236664984 0.14705534924531149521 -0.48386296738386397331 -0.0045139659809688443409 0.8028523887050930119 -0.73881341381432541482 -0.013846725624416422046 -0.46126036746284021506 -0.24736308584812904954 -0.10541187591195899653 -0.13981584368973160037;0.34660530555028123967 0.14366934477267223613 0.32027011457834547725 0.36850713023485270892 -0.55388807408443974101 -1.0679470041897405341 -0.17625717958144010433 -0.070589153788339950579 -0.52679651218730194628 0.339830842585242765 -0.12201674286498322142 0.49178873887201640658 0.17264920058808141956;1.5872394592491645415 0.83890205956725283354 -2.3017041789111316596 1.044149190996037202 -0.45657976605700778538 -0.29038975765763869186 0.54798102810334892165 0.012125056718967590699 -0.068647035720601268238 -0.032148364923515672376 0.41336389487963282052 0.026591476241076324877 -0.0096595597057555441373;-0.29111000092727712385 0.58288809432255372922 0.28823671161942254759 -0.10282413146043577201 -0.38754350850562763187 -0.39603193827320304354 0.59649122759721318054 2.0228124729299259421 -0.010629497077635182908 -0.35047493618486452727 -0.25501043852831023484 0.017653650040535054377 -0.068949178103590857969;0.3052505555679149718 -0.32786506546201721335 0.00793506489871896592 0.28402909606585385882 0.1301203168236709784 0.23958858630938512091 -0.11411056596955888864 0.34298003966231094264 0.038166548330573001058 0.20707133784533557352 -0.35279945523298444909 -0.038239185173598491674 0.029162027858774662581;0.0076557632964073685927 -0.8522555986066688849 -0.0035592417228219458414 0.74952613746062557443 0.62798772389402801597 0.54777031737357506636 -0.72201344810989775969 -0.017119457948968519467 0.037274788156816188178 0.47859346062602070582 -0.13735670677667763395 0.0023684850275811604806 0.065487506176922061218;-1.207539756195128211 -1.092111969610190636 0.64892794097848383039 -0.096776329675763106408 0.62777983108597024131 0.23794057040071087128 -0.59359778014747022201 0.34781874857493061404 -0.045734885204827296912 0.19120038868226932327 -0.23842519741084075569 -0.0993025905793909619 -0.015955824859440866093;-0.84932255819922264362 -0.13155470472509042668 0.010693029737790798669 0.17397591865459821614 0.46857910649494471933 0.28890886975735596831 -0.55236803041198478947 -0.60916601896989885923 -0.064262260433783982561 -0.076299859390865823472 -0.35612460529464567971 -0.068262497130904306597 -0.11483892308645718416;-0.87386107603292473289 -0.10549923502424782273 1.5449167911838794787 -0.90363903672471201922 -0.3563474010427101768 0.10409505759229714661 -0.23408871192006330819 -0.29569723886028548288 -0.087488704547105389242 0.57971094266928335781 0.34122765040400443448 -0.03341851598521921457 -0.1188186796399116063];

% Layer 2
b2 = [-0.0067738653312841750134;0.75049999426322933083;0.41963912218508714336;0.073753448652595324231;-0.44257669829436241393;0.19876751873867140596;-0.26917454499494808395;0.065032215946711796617];
LW2_1 = [0.17956404871440309612 -0.0057672851217680023983 -0.41384323772789038953 0.39615898928107878829 -0.042783272567025645849 0.40559314165149479292 -0.094104754034160867371 -0.48753100824147965753 0.11121542659704798661 0.33027320807923243873 0.34557839604789830634 0.12558832407745293414 -0.18757837102918981098 0.052094990175212622929 -0.077494004911717137563 0.020313367936277366976 0.051421284410747392091 0.65148833921585713735 -0.11406378123575133809 -0.72455685855069706935;-0.57936079832581532933 -0.30694527590790904314 0.72296367265290617521 0.47832400527153712266 -0.43482632133428966714 0.015979431525805647824 0.48052448702186628671 -1.3631649439174009508 0.51494092812319580688 0.6652980146442484255 0.68979783690452167733 0.25209418184680565389 -0.2051675766935225631 1.3273005168335780812 -1.790325776875571151 0.61677016697289521741 -1.1749319609079880156 0.15264212779403379949 -0.33432419125178530761 -2.069014613945250769;0.1407923407378075531 0.12971723023638767613 -0.15743792552674296115 0.023845584695414843296 -0.25762705049426520842 -0.32854642965466257509 0.5088624246360423653 0.14560351563060622282 -0.069704740856909724878 -0.056302228622491679033 -0.26776363910452571915 0.19956556453905513471 0.062126120401200732313 0.0014955591791309362504 -0.039341040499211110681 0.44400538868418842897 0.18493819860910418185 -0.23599873376463267882 -0.13602362940389942092 0.075342232651559232215;0.15972342526969304788 0.38776177285385321492 0.27685923493097697179 -0.61787425957454356062 -0.16854677931440509298 -0.57913417941165623581 0.1433104190488700691 0.8313154802615454475 -0.4910330700012444094 0.17680178390121506493 -0.85645656717728080309 -1.1210129938846733477 -0.032505836308200398987 -0.48185048904520200175 0.52303800131622446568 0.0086130166884740705369 -0.059304575543234393231 0.20946978747737304838 0.38255478289702832262 1.1723822792344131827;0.030721193443117959798 0.3457116561608793992 0.085036030892173014584 0.32387026477715569195 -0.35842254759352104587 0.239417735800874526 0.35691537670890538525 0.40327038930500880287 -0.17479411424726978841 0.19762749200792284476 0.39868223447642675561 -0.84765139564437508302 0.0086920119565623496505 -0.62136681495705137213 -0.11849366679289863313 0.15986903752904177423 -0.26630956021903517961 -0.52130649829078301583 -0.59856802457150726227 0.15012625315602076692;-0.40640855326544145232 -0.25210393071744385818 0.56103835046168026857 -0.39434758459229735106 0.13510875296510560517 -0.1608764466655932257 -0.18618359933631956071 -0.19360429504429985115 0.18627235625894469906 -0.13070090056594824146 0.36575621168571170738 -0.5884452430510197507 -0.076512175281604588584 1.7638829324654377029 0.29193470315099373513 -0.25877611643485531889 -0.38881676417329097406 1.0655455018873016826 -0.50946002676864576841 0.20697393615351156182;-0.036714546189410932064 -0.045113012344861744274 0.17359252646729061986 -0.039113817009556177406 -0.77076159897706575386 -0.14153170606800263842 0.38356171797975080473 -0.19743436458375879239 -0.0030355985598465211675 -0.45377230613806379678 -0.12003318977483021235 0.2201222362547242406 0.036322927287542425279 -0.087062099072670248723 0.37685707488613107152 0.19334292935812266712 -0.010592040607306976024 0.2952517000026239069 0.36590330466648673946 0.13519533593234797642;-0.065890576914541268416 0.014683797387514871055 0.11253761581092952548 -0.035441129373773971878 -0.098338823743634021235 0.36703174180607106569 0.060919151726112105716 -0.051943364145109797991 0.030097211814062940771 0.025112837700681543002 0.19592093528638349076 -0.19313212569941781704 -0.0421423216416314389 0.17071251857303670896 0.079545282693727237255 -0.48336662904673710628 -0.030352824232489167278 0.3643354584649189376 -0.16016727757192600334 -0.0084667203995156259388];

% Layer 3
b3 = [-0.0064481575979950097807;0.068617670867890112607];
LW3_2 = [0.29248666310601395546 1.0857550668418805007 0.74794167220368867888 1.2030615999456866216 0.48358529135001548926 0.69303993988968204398 0.4220881569598339822 -0.97300604604862228619;0.23599042565614686273 1.0240245169621282617 0.96060926618132425059 1.0746661031412951814 0.51794635711593173255 0.52773678532427825694 0.37611541371578377513 -0.27607323787850468477];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
