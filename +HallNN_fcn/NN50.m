function [y1] = NN50(x1)
%NN50 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:28.
% 
% [y1] = NN50(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [1.99959123081725;1.99835307496203;1.99847041707604;1.99869842531878;1.99833706273044;1.99915382658837;1.99855933179868;1.99877447495524;1.99876485579434;1.99919653665796;1.99824751369358;2;1.99812398469164];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.27093472611500613034;1.1957624630445495839;-0.31829060535572128998;-0.17888796957761715634;-0.45648180610473826357;-0.34344828276751310225;0.11627776469770746692;-0.13659588440035991264;-0.031116550619067210454;0.093973108248377637541;0.016521464155376600069;0.018856537120654069672;-0.033782401734740306887;-0.31925008488715256316;0.2627860797728651665;0.19702068456820165387;0.57706858662563931262;-0.94549261629840297694;-0.39296981459956070726;-0.77395413675212176852];
IW1_1 = [0.0035875875503376467024 -0.16923097510857795789 -0.54934836058198943665 0.84873613561552041507 0.082536242857862443523 0.060162829662029550237 -0.055498966231842472574 -0.10448081878193274386 -0.017086425836863750743 0.0019645135754257094483 -0.026575440913556833133 0.020341845654283836203 0.0046303221336834437388;0.70910151083963512963 0.0022733411614161503148 -1.2851619397669924449 0.50673269866401626782 -0.38342407375758275068 0.28402221915476372205 0.25470057259509820691 -2.3703227482645496949 -0.052642059673411754905 0.17380858090567347096 1.4355898536640065988 0.18051631272167315001 0.046343178322277370218;0.47696705276168099852 -0.59936737038777132547 0.16932135380581597728 -0.33251696029105271002 -0.20860775033729922479 -0.037602324363201204693 -0.23115269165283647279 -0.71320457539446568962 -0.011284572112951437792 0.23838311647070919985 -0.3694885444206437719 0.018647417228717603349 0.068447977336078422161;0.2868215021521999808 0.30283256519789908401 -0.12671372666106583971 0.115947408323941209 -0.30803113932733139357 -0.13647832302137535843 0.33240153324689958314 0.020065323840484518281 0.036544932634589841203 -0.10342191423735948297 -0.015276995917351248594 -0.033434624343412835956 -0.02327044474887221201;-0.74338113565728980436 -0.6413383620349598635 0.75549134759762937019 -0.22912413739977383065 0.48940528174502795355 0.021672475937003044671 0.094003135040798352362 -0.24451398865906281976 0.088446543148406997492 -0.68162470225386428968 -0.010439956641149491373 -0.03799171593854137885 0.009211583867620871599;-0.9716605747767745882 -0.99473361856312914053 0.93744001112892716421 -0.20229947623667782208 0.9574896770363954257 0.54720893383135971177 -1.3722548070740789861 0.47734205759513942402 -0.22549952130031367115 0.84708002133210502649 0.38855140829649048584 0.10153356297470970959 0.051705977998074040269;-0.33443063368411146685 0.25004897553112437336 0.20051872772751663798 0.11373108515748174552 0.44415648848709449181 0.22107373879498945501 -0.037111976143207006662 0.25972505969164316753 0.078035235764028085259 0.29738432025843386519 0.080311982684427379864 -0.048920229081656260717 0.10222245629354896612;0.95031077636882244075 -0.60994107830949473303 -0.47215513407535603108 -1.4400866102797249546 -0.093801709707136776695 0.23022923353814331304 -0.16603871699800668016 0.18161980408950972876 -0.20444409339138019943 0.72512998694269570343 -0.085743352492309202195 -0.042489930972269211729 0.085060151023657701308;0.74337655936643687316 0.041833811660881896344 0.59190482222562257331 -1.3035955676485515564 0.15546257232698901252 -0.02135050779944160787 -0.14888907090177261328 0.0087230351142367178185 0.013505392647072476942 -0.036693009198052524422 -0.20378459161965772894 -0.0025910995927044002361 0.0064108693703053736337;-0.69738759989704812714 0.15951125057888579373 0.44106502285188192714 -0.23196924670540855495 -0.41847333043677342745 0.57068510165736530126 0.057277610045908089464 0.18176073943586312787 -0.7505462742669813947 -0.044155227475875288845 -0.59789065618276748815 -0.30430587491602834049 -0.30023707188330078788;0.66419377306331572886 0.75628274313115595451 -0.72294267634435460668 -0.17145014317921128399 -0.75470916589422887277 -0.27913963074146413978 0.97523890435696614087 1.2316120495412676838 -0.28345780033762019157 -0.038553581663349927033 0.065843867470167821709 0.10470485920441609251 0.07413494027220224325;-0.85954851020877365286 -0.055111331807776407776 -0.14012973071831064109 -0.088459639653597654796 -0.054405378625881267718 0.18810882693504052399 -0.055306159236691174175 0.014491772457141154778 0.10871072284088759141 0.079383606562893296865 -1.2140099963119512783 -0.10954874871454400864 -0.02750162663409210298;-0.15236644278119060303 -0.4557641092336769395 -0.28611067853394711591 0.79184219736177141602 -0.036552945405287862179 -0.40057902023343744391 0.46319531807458907968 -0.23051921070014652626 0.026074756175927478463 -0.12148075165409523424 0.28010746643184614157 -0.43953821678654375615 0.014285234981708857388;0.15530309307722395262 0.33667486052941308916 0.097915408665612477246 0.39764959769817476154 0.59540080804219663868 0.036661667462139835294 0.45272061590741613513 0.41204150963419627907 0.68465294759726424978 0.73758494554303810631 0.36434213282219612973 -0.34520749053264065953 -0.94648681510984822296;-0.94357028605069415139 0.32220509001036895524 -0.11634114340484803807 0.15713256149327795019 0.027419441006586123266 -0.32938535057698425934 -0.18745569543385054434 -0.057928557056553788007 0.12776471939053682392 0.20797055217871798782 0.072417035078101626988 -0.24266485069102472494 0.23604020973225728341;-0.47907167541219375373 -0.93832945498898057135 0.56322448220744014691 0.072458495670006686784 0.66827800423526217966 0.27831157385895788359 -1.1511915161289376641 0.56203974352977859041 -0.09689911517624985593 0.55954240437408597764 -0.59364736350123936681 0.11754555719384991719 0.095598364011952471908;-0.036631285525514707679 1.2128655347823531496 0.59351643416563404365 -0.18755922661655144434 -1.0282649181674858863 -0.73321358233681088734 -0.00088074247904455608971 0.08505093837773197718 -0.11575142550282911669 0.065641213723037147854 0.25906945941667436362 -0.015937409445998671625 -0.1551752347107257235;-1.1884313782915754132 -0.45659454921562186991 1.4690207376354647018 0.08922861246606311747 -0.26671949758979257572 0.41550130281339309191 -0.30660590306265178562 -0.19442407828680266513 -0.11314204534291606719 0.66221802778887195462 0.22974072182351737426 0.18562754024293645627 -0.033038477919427246265;0.86158182341209432753 -0.45282490950610798652 -1.0562714402576238726 0.93755531869275221535 0.39521333940898345505 0.30330575697108491662 -0.34226715357976017495 0.14252391366120886751 -0.078926246634823130077 0.099258278365792457221 0.044496877642716543833 0.091371565466497078889 -0.0784563863195398975;0.23888373365451601171 -1.2784830176120423051 -0.12865331003169994117 -0.26223352923271459058 0.37686080360873652761 -0.021496088459651268437 0.47162894895602874845 0.82202181470808199926 0.035472308909361482954 -0.37051511360478656121 -0.11757575901967375065 -0.075055396830957007981 0.090152651148345863685];

% Layer 2
b2 = [0.29810819221840700877;0.08667275509264645017;0.044898379104259658612;-0.15987027911907014666;0.16491553308290057833;-0.11731092621826193223;1.5813285925403257615;0.44863176848648639305];
LW2_1 = [0.70262551385724203445 0.12204487222953028236 0.24764777602676305013 0.72695153128659595332 0.0023529555075609939925 0.27630445299147438076 0.21023406224366303352 0.017905630930990752009 0.39220297895931172105 0.053487892530608836805 0.22018909542517317579 0.13103335665778706454 0.097383563021798374981 -0.096534095672758182816 -0.15672187484430469273 0.062687258172298684911 0.065411991704573874129 0.084173008890123510173 -0.25749485940544980522 0.042209695725640650199;-0.53393632910616373177 0.052908578349368323712 0.3236524612658601141 -0.46417110450920784359 -0.08540049104207969588 -0.19185162434345642835 0.051422945084578279562 -0.059043604790718330622 -0.25212774545442895313 0.055521894921127509792 0.22261692773133454071 0.22802559366468697077 0.13880592421833132244 -0.12321276089830766887 -0.22660230085862412275 0.0035425057297700721093 -0.0083763366697272752248 0.12781437949128957032 -0.40366773852032494796 0.13465742538279082408;-0.13399945815356353873 0.51169880173758186537 0.44279575005033533497 -0.11619567497809119017 0.22449385677541769391 -0.99007444828135826587 0.086337183435404238341 -0.48685846284216283131 -0.64888669043734792385 0.076612701244485797991 0.4500734077463508509 -0.17386749565948717011 0.17016294626686920277 -0.18905781327690601712 -0.23621531983677490629 -0.49079486584951736994 0.0031862413533489380296 -0.14336590782838884439 -0.58187971284011630324 0.47025855292240509309;-0.34886916480715501887 1.1084319207031845256 0.10714127904476866693 0.60240939465572562739 -0.4173625797492495626 0.445561405033813418 0.12894542355446519943 -0.15200741109160934017 -0.60749497731982127213 -0.40747112459718864974 0.67298723028488405262 -0.85517452617549249982 0.35234159157951394636 -0.10732857567068544713 -0.50561250999524975924 -0.4570246965903123626 0.060575135961340446922 -1.3272128265114195855 0.61421215157127539985 -0.42446148676056633109;0.21626703735682301089 -0.11271689031690088068 -0.063423259987421959361 -0.086513358038896093216 -0.024893501460176801349 0.05449217972946098637 -0.36523705945863532696 0.18061199157358676093 -0.011661750582339217019 -0.080822693562005457069 -0.14236500401205418043 -0.20247516749954214133 0.097226826820585990352 0.1645708028370659326 -0.14958206737014481669 0.39880312192775280167 -0.079964474970602716919 -0.062151191594758938008 -0.094513477185625929811 -0.102058441699612229;0.058259790816008509562 0.16175907489729088318 -0.11771331721981352636 -0.41306498766968013925 0.33817564731868299255 0.5158061643448981215 0.25179995972783802971 0.24468420811247462709 0.095078480798705525268 0.0013817478171448504924 0.1841197858586720304 0.13611907886842364301 0.1387740486299045839 0.049085439186059433292 0.020943028459801810159 0.41232696328411400088 0.24079041235129014509 0.13785491943429470374 0.22706947807365487901 -0.33947110837674066008;0.079507283610425236176 -0.97775318545737077702 -0.067878454121727604953 0.073236017256763041861 -0.21745694862897499422 0.37782680101079568757 0.15938799755483845644 0.44430035462310174532 -0.28988320445757981281 -0.28704790575823058152 0.40873636434925963989 -1.0993986507826472021 0.01516677536691969988 0.011417309172591158864 -0.069376036162800872042 -0.68563240822313364919 0.38910038493097792722 -0.54324001723428627653 0.2955674833075808694 0.010776020848158315152;0.9586249162386333289 1.5214184451622974059 -0.54134215349787739857 -0.043408826135802533464 -1.2723495653854621779 1.048168901874556358 -1.0403464689958159539 -0.76315050854774246769 0.5253536997772728645 -0.61783849563791981563 1.0157516474014502972 -0.20671746777740204748 0.89241661621300472085 -0.15385769203379184855 -0.25787049145388707405 -1.3725888003753032862 -0.49591839439896312491 -1.4468081147464613156 1.4753915394656003102 -0.95183797455511476304];

% Layer 3
b3 = [-0.46132932569791412769;-0.41077539861155554224];
LW3_2 = [1.3138578850644362372 -0.93262278145580101985 -0.086283389022877160501 -1.1264191142098693987 0.064010682708155922094 -0.60639717529650827288 1.0843293017069903783 1.0681619988514943209;1.1970316652329939799 -0.68824213971274539325 -0.046947728310173866828 -1.0496145342470950546 0.27529142440937948155 -0.57077442794220523137 1.0277592244426576595 1.0214412090442108738];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
