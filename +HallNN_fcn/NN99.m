function [y1] = NN99(x1)
%NN99 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:30.
% 
% [y1] = NN99(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [2;1.99921620793673;1.99829878836773;1.99952629902129;1.99813106908735;1.99855473786972;2;1.99833287146478;1.99996858483817;1.99904175518282;1.99818903272242;1.99829818245242;1.99874453754288];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.27231978538028539516;-0.079829801497723965054;-0.071742845109680319915;-0.88435243552983677784;0.25857651758833433142;-0.25421234241054196934;-0.51264562167683791483;-0.0092743882309686258986;1.104275131756464523;-0.051992951979935024542;0.13027259104206342921;1.1145929703265111677;0.68598740299837368539;-0.1553210960644374472;1.1337856704000592867;-0.51308249345053213997;1.2740992188410742436;-0.69790049172307178083;-0.42203123455977770151;0.6305148652808896248];
IW1_1 = [0.1414314833606677424 -0.53392562885147176743 -0.026875877853127887185 0.0088014067175859866249 -0.1100215707751059091 -0.20494034711885861233 0.77166324454745149897 -0.32971827967143096938 -0.087808806097299296756 -1.1221922469400895661 -0.047178246671107808285 -0.33482295661805577813 -0.12545731414252647706;-0.17384103382317417363 -0.016551049140290249873 0.60548133018802907657 -0.39819234342887210865 1.1264089882111600893 0.21636838696714119634 -1.293013932353447526 0.56682733639848048579 -0.11585041309597586545 0.53380517841510333188 0.47919249790527063126 0.31253283315865848513 0.045303778856837763345;-0.40453352635441347518 -0.15921742359966739588 0.22389314433305584906 -0.12023652291439722306 -0.056155396269056773173 -0.018885061832064096304 0.034979506737604075528 0.057995010252682915874 -0.01336196103079885858 0.02399762908687579771 -0.035150921195579915013 -0.0026879188017027398627 -0.0087824248022211927334;-0.56023996053048719101 -0.64316080953705001555 0.60049337084173637358 -0.032644584898413202267 0.94471300460762375195 0.61354766368918023378 -1.7193797690163923342 -0.037037050152107557632 -0.048791866884077779443 0.89481090180076194862 0.44834656223850577472 0.10831246462040326761 0.10243216827905952948;-0.56632650284640961846 -0.5120996697176382062 0.10192844720331539765 0.008231542966343869186 0.2827057947771766111 0.52842272399253664705 0.56337644195069080943 -0.74200990632996133289 -0.28856380290674366051 0.93707683690730225745 0.40364459450649942118 0.42226665765765969418 -0.009764141541812647318;-0.34231578754835645384 -0.28989953397983042604 0.12175238003943608667 -0.15748821281863817356 -0.042313657007477627203 0.42922049893086750005 -0.54830131180134644708 0.02493453758947741794 -0.37226759575814477587 0.28563367274928053163 -0.30764219008041165937 -0.35653310291569301205 -0.28945559742557558369;-0.1138257388238549106 -1.0582351557633555839 0.17587032896924040259 -0.34828374981977788805 0.2492843798031918745 0.16602955249118930836 0.53575940756121875896 -0.34894499585271532283 0.2050777575181256529 -0.27177873827098825155 -0.55801055623355977353 0.020000467292086002158 0.089920422102296254652;-0.4072839333115892968 0.024344479491429711626 0.36336250472117748167 0.19950902169966255872 -0.050491052721214658983 0.41925161741504796131 0.11678180513253555439 -0.10615856671283904755 0.33180957877595057548 0.39230799902596574791 0.65875028324970208438 0.00065696735071482052076 0.071918479028441048562;0.93565858962157943957 0.56898007161888775052 0.70396403761376824537 -2.0942383058433566845 0.0710603658432693297 -0.12490685776421418807 0.040504486822204963103 -0.13552171869589954567 0.036943390850786739232 -0.033091989386310409482 0.17241921635154860981 0.080807767052193835156 0.014011271823041146142;0.078522583314371161012 0.09535752348709621018 -0.36463642489504838329 0.10904439283089806256 0.098591799587095602098 0.096793218587742008152 -0.021630435717267342682 0.072752550295775778033 0.036600386228027900759 0.022914324435234282445 0.037875970033036616968 -0.01241903161627785912 0.038691392201343481616;-0.35285369198156868453 1.072323582917911633 0.16252730010037941266 0.34075593398286097013 -0.8385688798253598808 -0.62176237732345596143 0.71053596970338128713 -0.059319960765213231024 -0.029478690800848614956 -0.73443087169468501685 -0.17679686573044359199 -0.01237890582447563094 -0.17956018422512073918;-0.42261387186992421805 -0.77161000189651884895 -0.073723956312465740992 0.24165117781715678147 0.58273858455994853589 0.79535910269307419362 -1.0960627242550298188 -2.3085882990164652284 -0.072548304170023461546 0.9384385692247694255 0.66852771137607491791 0.14086983686858112197 0.047232690091180876135;-0.77622920920012561385 0.47415229117756418908 0.061296626331582337865 0.063063360521896774658 -0.1873047595839193169 -0.38211526699675024688 0.10568228182944733318 -0.45118688538895396212 -0.14853340168908166219 -0.18742126317387106105 -0.028428481096740322587 0.019566165041928245544 -0.090737854836124343105;0.50395103450188249994 0.74962333573198858261 0.65308859433733446043 0.089948348415479897899 -0.66205314953230254282 -0.27350378489621407496 0.45717745296113743159 0.45517327554112829713 0.059589687572244157132 0.44445217909645973187 0.21970269772860004376 0.23675886903297987951 0.19161103946853375035;-0.41734916038925540249 1.5525367244523868848 0.47293515661515872495 0.76133190940940764779 -0.29750979185684001127 -0.079967812170876062527 -0.19456079599341563613 -0.85679312469367385763 0.13774999652548861051 0.38114509592251633041 -0.13319554872749470031 0.18114490219446124919 0.0901985157476600935;0.18913824165190917803 0.14115759603887587104 0.2638158515752121458 0.35276385393753068032 -0.35821283741386084065 0.064274421610577017749 -0.37545813082129558813 -0.44612196298783757253 0.31578359091789942603 0.17482974195615841317 -0.37100501384543810302 -0.39268077336232143359 0.14546335213198613445;1.6136950999410473173 0.37726628768678188708 -1.3279707147899828534 0.68288527545953459086 0.064030370766483588052 -0.17670141763807903357 0.28349411839178584316 -0.88066784570079559291 0.048455868969127208201 -0.61299709643338518017 0.26140974930730564996 -0.076019144462634094528 -0.069086558833011207925;1.1982057294718291285 -0.045004691009900510412 -0.43909627180465171659 -1.223760972623266996 -0.24123448815769513165 -0.21318763472109561463 0.028728333941709541938 0.35108215857061331189 -0.32397542023798747701 0.13332821274125891686 -0.016436433844349118694 0.0024703550316603475542 0.054415169691058917767;-0.85045971920316998371 -0.31447305451869123072 1.590428999791641429 -0.5834178069733632066 0.18281345288172123897 0.12911995124076180996 -0.19004616530170304056 -0.60890512853648848246 0.15064933051850709633 -0.30080853486951741882 -0.046457661639870979908 -0.044721921594001963485 0.053521533311012732537;-0.98867926639420056212 0.93727641711971754201 0.58847426503998456759 1.1245689799099443107 -0.25976656762149846758 -0.31546356478545140023 0.055237011499814796245 0.19825504931414750232 -0.12599342223727499901 -0.036707265439747366331 0.2525440581600705281 0.2419228516087648384 0.019152417930055988526];

% Layer 2
b2 = [0.33030326883837057839;0.070901969956951693685;-1.6149706712030251765;0.070140775748743638962;0.2782934967834836959;0.037369863869382534405;-0.5945463147070181309;-0.18423583858352271525];
LW2_1 = [-0.027899143691252341337 0.27872854569746635667 0.050067816136839665697 0.091703761266122924001 0.048859429116825045525 0.2029850064137351251 -0.061831258071196507076 -0.2053175470949693826 -0.080756056435291115325 0.37400563348785659246 -0.06970080415569826493 -0.16412585708116173011 -0.10527434474431643374 0.10759314079410832454 -0.075516790620318435812 -0.082315196756280656354 -0.23122508033024896656 -0.19010990873087779685 0.17304427843223074701 0.024517658511346650252;-0.051179138689349659708 0.38047936764182538338 -0.38462516425775528095 -0.04800384876610790108 0.008898426494631324693 0.22912540858589192094 0.25531267713215105575 0.030691899675900091021 -0.2498981304066623943 0.21185204327083681508 0.33822054968320558466 -0.20730195951097413198 0.0060212488540213812693 0.17813439894386343121 -0.12891149471524385173 -0.11935540205576726513 -0.25080809537832343681 -0.043032528404890066365 0.01311230578442710952 -0.014415326571026343405;0.82957606666165006892 -0.16487951082170204664 0.2392341904299555011 1.9049516614119015312 0.60456316120166830874 0.9924770032070299175 1.1986785242003550334 0.49344620653113008268 1.9967335052525991834 -0.35478416064555867715 -0.56759531081929526231 -2.2395316173985393426 0.92986212904164355919 0.72264466554961326317 -0.77607800184547492961 0.70885247941700013641 -1.9112045429964037435 -0.81937801782014441088 1.6740678875845036444 1.002695255836759447;-0.044648650962420391441 0.26537155194014694359 0.86776072185318042784 -0.051137801669698501605 -0.091528447325608316976 0.17485957673164051474 -0.046565875901499895195 -0.084226022252627583131 -0.15593043566365316632 0.3283803359007077538 -0.21286743684926137665 -0.078126226729883715971 0.188598358191129023 0.17232348544504136334 -0.049390666378717876239 -0.068831724656750789548 -0.030027706677278161868 -0.21709129393740148051 -0.033979180724417197557 -0.056754205838302762555;0.087252664840178517647 0.40010385723267705149 -0.38986281099359171298 0.0018850594548433644883 -0.027553421696319350953 0.22386720341251323263 0.092125068585159286538 0.096456109329136632824 -0.073736962256390495285 -0.26975185684283176091 -0.061843572793770285045 -0.007529381322263916862 -0.048451206776634142548 0.36003156418648812886 -0.067824865382780832879 0.021851689491026858592 -0.063180801765079425136 -0.047810948921852065852 -0.037069532648416586573 0.026626157927204005538;-0.083364272169852191019 -0.24086371349982860224 -0.18178293580070822855 0.10529616757033108398 0.0027109144409175230106 -0.0036829806861329540332 -0.40685525302888925214 -0.50234315070332247188 -0.07086462863620222874 -0.8982637838289202481 -0.8886477701937159912 -0.35961086681332560255 -0.20442298823082419301 -0.24984854729380145955 -0.092742958460761998341 -0.1064217793105963622 -0.27978574130115180241 -0.42716806403517443291 -0.13363019969290193534 0.1164726572786254355;0.12967622556456681604 1.4624352709749770529 0.42365409994506331159 0.36862533918775031161 -0.022902377006191493303 0.45665152782601786674 -0.050935526256813232204 -0.60030805295566136426 0.050698078739142803106 -0.83985818418412161446 -0.39598481335571561468 0.31168105018584618682 0.12680065195018783153 0.38878336474992569727 0.40124739777624451875 0.39560697993290516727 -0.040874584831488425252 -0.35177609131884651772 -0.29943442984639045967 -0.95365073773806807722;-0.11354528306396484416 -0.30946633543315482662 -0.7320421351865993298 -0.45294554746998949568 -0.24679380139224743607 -0.12522363465288516293 -0.15435769427926232522 0.18608750425714151722 -0.34452555713908600277 -0.11454133831108799513 -0.53247452416791329899 0.19453129573374694505 0.42744030187974124679 0.0055903357474996872439 0.071886018598791151524 0.051022085367016557778 0.39453914475739121359 0.013518585312256702763 -0.42355360886438603307 -0.025272346971112542163];

% Layer 3
b3 = [-0.8672853823733795986;-0.74271568479593741419];
LW3_2 = [-0.066388851011481384012 0.68066521368474308673 -1.1412880567288066214 -1.3021301756664438454 0.56615675834244849618 0.33577814941717720743 0.14028114503683672409 0.45034534371288315047;-0.69608192658161360811 0.6715033695842582695 -1.1646974795735682839 -0.91907359754376749539 0.67163200412222334723 0.45873180250032502547 0.12437563591278441577 0.22654118818640123223];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
