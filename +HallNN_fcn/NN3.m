function [y1] = NN3(x1)
%NN3 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:26.
% 
% [y1] = NN3(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [2;1.99885875721728;1.99970767611631;1.99977528922826;1.998389073804;1.99906330211319;1.9987116069524;1.99819565792768;1.99860280205663;1.99958567642033;1.9983039761797;1.99812591477912;1.99858898789453];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.48617761486419996952;0.48427798509993097431;0.25881690449254729502;0.44598354869104356313;0.0029249342424727403644;0.34269234048120855718;-0.15414823166795821319;-0.3775600826697292911;-0.31830551972504655955;0.25937726202423355693;-0.19812355721641566886;-0.47974637698700867139;0.57475526642654828358;-1.5911977465130962006;-0.079586613471892081462;-0.00048535348499452587653;0.83633648181148012579;-0.39478897902454557212;0.17820738224814702821;0.47466703688394246141];
IW1_1 = [0.79829893946115126901 -0.1920821999718649864 -0.12913814273067067417 -0.055189367990755494597 0.33944819244836821337 -0.167173272184220012 0.24934088193890635576 -0.087853064384083912053 0.014306035144370524148 -0.41924192013650785071 0.52513971493853384143 0.034337347165335874166 0.019039870074498671526;1.2224570186831773544 1.0164923285014326737 -0.94854250632299030865 0.24356102273394919511 -0.76562995134864475499 -0.40605475331808993378 1.0330734356269131169 0.25798798565187752718 0.027985743378327515574 -0.61186864993308343053 0.031767029706189366112 -0.017106604608416516033 -0.051362881832740313326;-0.4594693558619878937 -0.40492035694736655538 -0.16950539733895655936 0.61586671013246030437 0.45923518445845634695 0.16492779758563524961 -0.63697663489507927448 0.22080315693363514185 -0.081927447637582390128 0.27171749284971208338 -0.11809992239658025082 0.012435256593690510382 0.016656309125109760444;0.71382441710668409485 -0.038195674616975566762 0.22243381026348735263 -1.2338185786913962172 0.24816278823798110231 0.11230626804730997614 -0.27446220936141763058 0.056150157888708897291 -0.025604032495261819929 0.13120579301204557399 0.10774205383975594963 -0.027034280679124909896 -0.00049071999177869316325;-0.39175368512010416699 -0.13693284300436023293 0.37963225701723146699 -0.34765550119051180644 0.1411582134272104383 0.020794224923875420652 0.31986908387064516557 0.19628360512274575789 -0.26913440099472030198 -0.092779719336208515967 -0.18673472557570619523 -0.1706205146398140915 0.10079453540155013103;0.59248563408111509787 0.070395732793227208668 -0.039038263090146289869 -0.48100020503463575272 0.28532667399573974354 0.40346406192275274805 0.091532224440681944633 0.34892883294034693353 0.65182087174171121635 0.10800670201213824484 0.12207317629441788442 -0.072303135752565125816 -0.090444187296307307355;0.73340865958187106965 -0.32847841929169052655 -0.48415693593242697945 0.099054947783060051658 0.17099792936478647176 0.13473208631767405463 -0.28721185100677482094 0.35793613884753400223 0.094465878431714236929 0.16114142237743658836 -0.34888786030861135279 -0.035695064821341729311 0.045802583065927236772;-0.42641248400095083104 -0.24395163808102332537 0.035175578030346238423 -0.11873035013928072423 0.11526183275151780094 0.08587969511632365105 -0.14178324707975303864 -0.12081287353190825473 0.064847191512552498915 -0.15100407801179788203 -0.55718939827122848651 -0.076482216660566038069 -0.05579934944142548453;0.12893639775927703828 -0.38358802208126885347 -0.45456928183533851229 0.46917594085486202804 0.2133367774058071431 0.1750555913730582891 -0.071612032488060001212 0.19014279223564234389 -0.11641004847793590127 0.14197315799179063833 -0.038751018358902621086 0.017955283156847298004 0.021802021181280693135;0.68062764320144797381 0.074589097784038507766 0.29365818585634312354 -0.11888076731331044533 0.3615619483323393446 0.27182730533091231662 -0.40852198718847176906 0.096148119292369868538 -0.085278773324683518342 0.026326006135035200789 0.36562383282214278024 0.23172821128430440285 0.072748730131382707831;-0.65763517527182213662 0.17959650733589696547 0.99309068487617668808 -0.0157580850406409817 -0.1701822077766521335 -0.16247227405130393318 0.09838099380820040929 -0.65096767419396206478 0.040267845014375185098 -0.28759343557500849364 0.35792042797516088193 0.034761485972356120921 0.024806859408335778933;-1.1116796690138628367 -0.17308859777322749274 0.59772460790984716095 0.92939605963596072513 0.22970659551895247774 0.1609971422407250885 -0.2060339867624354504 0.42232652931833514209 0.058599781009758739048 0.089705595164547569098 0.15338465148476612687 -0.0087381590515172215955 -0.035319313270433326524;0.30992224732977358137 -0.31994079205575631786 -0.45888036928319692054 0.17871863579792141019 0.20729364447405398963 0.58741196106652859843 -0.1804109095073819502 -0.87407678480590533798 0.19289641931939122133 -0.067906700459980484652 0.38485252516011309032 -0.016808838056793371646 0.011093460583221225954;-1.3697150207359036767 -0.99782822702653184432 1.2812432676498695105 -0.53155904196648506854 0.54184436643234268338 0.42312043073803851101 -0.8080818891620524802 0.87757490468407728379 -0.033201994204344532913 0.60882629401701815475 -0.49208974306883851435 -0.075438745377338148335 0.01365437259387540167;-0.034758260440805384406 -0.087544058374496760977 0.47785557206032758248 0.024819633925031600596 -0.36881046660999200482 -0.042898299539488017607 -0.30058186263999009391 -0.043631099742042163403 -0.15267977337719326747 0.34682668490119650251 -0.13900527061095363512 -0.0022923863201211565691 -0.059447347659492458249;-0.027480511792645039015 0.027396915975226230483 0.10715475359443264736 -0.32899742075677584907 -0.50239107327048071472 -0.10001939542715634901 0.62697658322050220381 -0.0032032481319662891445 0.028093278553984853824 -0.2132788597693269228 0.018039808737291176954 -0.04274062936672577695 -0.002253729020120654597;1.4835202749851466031 0.43572795376408846035 -2.2114380563363966736 0.88162969143780656189 -0.25132962643173878403 -0.081630176414399679974 0.25993923777654276419 -0.94221177545718559632 0.033680737921670408919 -0.15359368175612247986 -0.052892634610437118392 -0.0085829709194925989102 -0.00042069848942943746488;-0.2117394394680732761 -0.20092398502767422341 0.31419445661377976009 -0.31161742814237430865 0.22236293802701825872 0.24531337290722204925 -0.036485453917816691727 0.11498894446768362365 0.10397689769114411285 0.21674683973539318749 0.28133717090665560923 0.10228150453465838232 0.052399749683472392203;-0.069448064453721231049 -0.40657396002163354032 -0.10500727519559047152 0.017289621154535039088 0.10891766322082127583 -0.26686736285709700134 0.55827201048471286615 -0.31020635701431037434 0.17763742871254797895 -0.81971713219211383983 -0.24166057025520915058 -0.075601365486709690145 -0.013993879982071974824;-0.14336543039256521848 -0.3843952826560181335 0.11042089756218001484 -0.092695913758986059339 0.19895459315479269158 -0.20377443495323627198 -0.37508910035824816198 -0.31427060666371631203 -0.023278860465688194781 0.20340763239918149829 0.038127013966229097996 0.18091387332473982119 0.038248581123017648398];

% Layer 2
b2 = [0.092849962310162986734;0.43308502412675692339;0.024835866108917824258;-0.73831675666474894104;0.45236371294532295995;-0.09882867484086987897;-0.94018470934444986487;0.24191603347224444054];
LW2_1 = [-0.030475583500278794619 0.11731952447819411767 -0.47379359008258392638 0.18689878898039827271 -0.035040115560806293915 -0.13064110193959091455 0.12397851575979694505 -0.25316706705882519035 0.5051003751705456235 -0.076709510418165469114 0.36873655262533838739 0.24520766106543323559 -0.203849240298547979 0.41288743274255840232 0.063008411068534997401 -0.34589248531037714018 0.46511610327885016813 0.19156845066159178259 0.049780462503308149647 -0.084057960484493640663;0.61158870399976272836 0.19918914996019154717 0.099266268543666519308 0.020381572403868408044 0.080319663417702427677 -0.20658370036875611797 0.51857176903262169887 -0.38665739972051094142 -0.30287480188287374538 0.27865824070649924948 0.22607453301181457128 0.062666720082529103752 -0.79239599410637773236 -1.4045989763061201838 -0.33129386172629377016 0.2521090490307344445 0.45613967120635651176 -0.039972834637959246684 -0.68043822214559046557 0.41781040281785231105;-0.0018787762229031060995 0.39495272598042752143 -0.49276785638907388831 -0.34499657544422418498 0.19201582256743218724 0.14158838256671316125 0.38105799495732356474 0.3699714102404554894 -0.040609187996507707663 -0.34965293094763760795 -0.22896271153693104061 -0.13357872711575519142 0.5192654558571613288 -0.91246878018493970952 -0.049719679942348361801 -0.30069226519641756301 -0.36346594984576935383 -0.28853410329134937529 -0.38719488647202848774 0.27424164923276184158;-0.73246050731003897738 -0.57463403728001394288 -0.6000911079168838036 -0.5679105516014032462 0.17519428429418518189 0.12359907668102820821 0.033322538378307335616 0.33702147348671196436 0.27503081564289699745 -0.40611932889637608612 -0.51413769790896579615 -0.51219658833112224894 0.19083928040646599977 -0.14381601221402121049 0.1167149076093443455 -0.23670683831764549598 -1.7117022231931589005 -0.16844708062727037357 -0.0135774696254619201 -0.10728263067658247443;-0.15785948646859965239 -0.46255229110149509442 -0.38673150588417654072 -0.17795997669239091432 -0.24479811525175887432 -0.3466868545962505932 -0.12276947188694031787 -0.11578449891097745972 0.24114766456253669547 1.0259010706555267145 -0.43637137048252266913 -0.11856111680361997029 0.17461256306339253963 -0.16048530407850070123 0.08173132736703879464 -0.49839084549591178286 -0.54814468260806781252 -0.15787975726657491049 0.28497721213467919199 -0.45887644611359690305;-0.13810448090604951488 -0.056220672412553893138 -0.25832574967463645121 0.092809352309967896311 0.16608628317115495254 0.19488685792851606626 0.080114079020350781324 -0.039640543964904205454 -0.14983752083913459696 -0.1579284576331536627 0.10489818247412940888 0.058688517335592632618 -0.29065174444316732583 -0.1194293857938241582 -0.13644042239205853018 -0.42162521220130683153 0.083113041523240324682 0.025632993010316625776 -0.078342099681436364045 -0.014722559855247771554;-0.61256021607659405515 0.45896036419876845569 0.64292597471819168398 1.0372581113232230976 0.5901310192033942803 0.28532649147159860892 -0.72187754291877348489 0.57056666354465768176 -0.82983162099391361011 0.16118265890296606946 0.44496460739693127762 0.71955444641184540533 -0.19424660379153274592 1.4975798138208182841 0.74884930882052713752 0.58369464538278070798 0.18234558562518324298 0.84335585697670867322 0.60053136672341533853 0.24344237796367992899;0.01892498765138397876 -0.28855502959392770324 -0.38270765979010962221 0.070868547969931805497 -0.033817397717571653915 0.18431457644890963943 0.19831913883204044247 -0.37744184092216614967 0.31277234137761339428 -0.11336689549119828568 0.1027844714590798042 -0.01702719773905390574 -0.3212615788457028887 -0.2572280281497019705 0.26259594967317434477 -0.16041141619526302908 -0.089112434416115576807 -0.097726821053393336802 0.28258007557416908728 -0.023366051199874973004];

% Layer 3
b3 = [0.16491203332904458279;0.20834572974325826777];
LW3_2 = [0.99493131101463982979 -0.55992377826018446818 0.83336599137182354458 1.4259367992011318105 0.4267393915750417599 0.12829115634001125867 -1.8094810833968417718 0.71561853260014163247;0.82802115251011632058 -0.53492740548171335835 0.70410613905745433883 1.439993464610504148 0.31396542707597141497 -0.067490784935568814973 -1.820556437542120598 0.81773123799066749218];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
