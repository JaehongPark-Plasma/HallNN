function [y1] = NN97(x1)
%NN97 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:30.
% 
% [y1] = NN97(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [2;2;2;1.998403951761;1.99884031500452;1.99828282432673;1.99839889118718;1.99822954785148;1.99951213969557;2;1.99807116832181;1.99834552756437;1.9995260501776];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.55014609105358369678;-0.062945014778928484733;-0.096049723977839923661;0.91353492616063758369;-0.14574529552510967489;-0.22962798691153846198;0.549052104661456708;0.52079019787410307796;0.39521836155744344277;0.22703176576279349153;-0.50022996680583708962;0.44323881027780409614;-0.40875860626945698106;0.19207247070365648933;-0.89605629108584572418;-0.045446018220587934555;-0.084305992121534584216;-1.0544300388105836142;-0.99547011150262076917;-0.4740707989271302214];
IW1_1 = [-0.030487990187764039962 -0.12729123714509782417 -0.061641485309912889823 1.1720150141442111646 -0.2195400986550432032 0.16499891795164292607 -0.16111338545039435854 0.53486985014753962719 0.092960399657348494196 -0.24261025206027758694 -0.33650950139288676732 0.11325817069962239303 -0.14002980913892612569;0.31087448722970012494 -0.0064810261119407986188 0.18224752094908108768 0.26050298534953814089 -0.56844259239582883847 0.45780914727535870767 0.13015834649679802748 0.17624618232122646333 0.11738365479262749536 0.16563469127091237643 -0.078689895272128301817 -0.02991505407942951153 0.21173652541370427405;-0.45843515411617558053 -0.44777474852950821527 0.39712381229894533341 0.036114545494386023072 -0.16981455554976304656 0.35436864648461563476 -0.13723607134599774549 -1.6817153160440994064 0.047998999649958330738 0.30341926319253448296 -0.016573092185640167506 -0.040314744338151652092 -0.015409991261079562103;0.18746094465466789369 -0.62715070264928218791 0.65311411418414777597 -0.25096038402706494219 0.15598999742696187387 -0.12003990802256737924 0.014568253638005249084 0.3463446197614815647 0.040686905609486276325 -0.26791559156673100395 -0.030115333092177232199 -0.068468073145750027453 0.060291246629091549414;-1.4989449220408312957 0.30720005994115906489 0.73180579554532998454 0.73444488481239655897 0.30161489406059788232 0.090438233118539157473 0.20263462436030532654 0.12819072073950005253 0.21536316328603777315 0.15461129048781513395 0.32761632336920321062 0.089022983284376827617 -0.18502516437371377411;-0.54712065918196528536 -0.099991221973750696317 0.13583655249775666851 0.12553132910431055724 0.22624773368630921033 0.08636063446062004767 -0.32812144796170061856 0.43476378850475788651 0.011504508502597815892 0.046031430293250186203 -0.0062392557412383571266 -0.042692845491275790981 -0.03410785670153410748;-0.46043455194236027062 0.36989042295799856586 0.52635571765118782661 -0.71519483452677956592 -0.28136387865825074339 -0.67885079743447895861 -0.4117622885063774163 0.091663848893296470677 -0.35879068618080151021 -0.4500637612326968684 -0.00079023407178395151454 -0.089252230785193981122 -0.26605486144573625706;-0.18545962931297993448 0.92150262746125344293 0.30661892683980629393 0.7029457305834834191 0.16884004288965337448 -0.67989454953331229792 0.078535140650415946606 0.35743807360196122591 0.045053450193505387156 -0.21493801670852624719 0.76186975018270386428 0.3887376623242118634 0.43097062333583369131;-0.33853400902572056141 -0.65039331524373655835 -0.17284209819949261644 0.071032722751736013245 0.56203865776588046721 0.60191725141414154088 -0.66898791461731488273 -0.80650776768881693446 0.011286002625074013223 0.58259469319185541725 0.083933530076928164476 -0.061095132154473361097 0.088000238285873041977;-0.52604894221328424297 -0.13752994581219896153 0.14730870496626316535 -0.00059805268073288928715 -0.12861100760500376872 0.058436350099811511238 0.32635437771692538123 -0.23081990622672357572 -0.043375007968666126623 0.0087211938574193979823 0.042561640035726641673 0.055678560367058427261 0.077758141427203053553;-0.97294247817194878802 -0.46409129938791143788 -0.77534039637847729232 1.9826619262982565495 0.29797139681026851843 0.16303700494453174374 -0.23308501654535748737 -0.24399448641011881045 -0.08351256831415565518 -0.0091641152648973839973 -0.44569949373807649096 -0.058866443111235157437 0.0099254738038228110253;-0.38756299771975016855 1.3145822958840451822 -0.10565745900853988626 0.61822441454316245935 -1.2269353199011618916 -0.83917985829927022046 1.6206064015840724313 0.057036612018535562396 0.14968579721711855468 -1.2455183070493132114 -0.03361284374726033336 0.02674932270997737796 -0.11556094072029360342;0.047641127920511158744 -0.87826348246290397714 0.13231245954473233595 0.064227680972142861537 0.33358112178518961599 0.30201673690456093402 0.45206419702728511956 0.7072573156125802063 0.18332987301160499904 -0.45027586174214617731 -0.25959779933046117639 -0.13553376921885046391 0.0049130024153244593668;1.5589797514640193477 0.31079509484843986789 -0.79751078963019750301 -0.76940863291029459869 0.51310419426691267208 -0.15589028835408511031 -0.23230318803482044587 -0.30573392878193705879 0.046943736588806621313 -0.2143820440347604106 -0.090646770783813418459 0.011173000462607909217 -0.03856338377276101459;-0.073439718800807129995 -0.72229791438813373272 -0.22176676016323401686 -0.28302883359705927058 -0.57853548060724679925 0.49500990744403755572 0.065856458681593427196 0.67506302658520611626 -0.30046499403543586171 0.023828426769073172975 -0.49565335773139901354 -0.48500538268907789075 -0.41291982448517611237;0.19861264877058232292 0.015653274530083860494 0.028905750397730019946 0.11273596829056524438 0.4795564005637956706 0.2021206329591836437 -0.15977796388537160444 0.31501411952434899 -0.050158344461917012125 0.016706668242063318214 0.040508988858663760868 0.036047098446883987788 0.029138356259465602455;-0.19366189114403573046 -0.69456010085477282168 0.1604926676899761373 -0.48675340554036811147 0.60028106012235438183 0.66142287317484382836 0.15933336095857902892 -0.57643991439047370662 -0.05949028140657415531 0.0083019987389116520204 -0.097451438164465178926 0.087927665617115985386 0.052112851790994993428;-0.43465585551472707415 -0.8946650594818779112 0.47061438772963842814 -0.15511569460074195459 0.77459715197510792262 0.54874349137225031381 -1.1373404046269655066 0.81459777994182280825 0.017869220303531208743 0.74903598586503838952 -0.15480043718135794162 0.036495674404942494984 0.20994142166419402229;-0.1700889985482380018 0.05927706413941039032 1.2984542870926232272 -0.4507672466309511905 0.046589634274205177222 0.53749991608864888804 -0.12151107557142550031 0.90180465272215404315 0.017199953356772372526 0.59937256043353825952 -0.48197733624721950108 0.21876126011635868562 0.2819270262493654422;-1.1804463219420968656 -0.50151975111056401602 1.5225851930833331771 -0.73038526908605028165 0.38052122147137207309 0.24646652118238165929 -0.10439241711078534047 -0.51279079119498682804 -0.0007183010697723293727 -0.35882768627043271081 -0.3550807310208813905 -0.038871290093128910148 0.051285092545843923018];

% Layer 2
b2 = [-0.25022140279077886849;-0.075131390769783257255;0.99453481517014441504;-0.13490057525138968164;-0.31741087624329122896;-0.34845980415256938567;0.35278950781846957208;-0.35352418508782007533];
LW2_1 = [-0.11481330285707101735 0.28809871315512958212 -0.30342947429222077993 -0.081250683954896388284 0.062758815993155664392 0.0086987849878498602757 -0.092525816362837826068 -0.0089426191134462252458 -0.10906604951986452468 -0.23763774029450931979 0.20131395869934476384 -0.28744019761750111419 0.16984178216106199377 -0.073826419071217064261 0.0078377407853037379948 -0.042761048527223836924 -0.19725254188975968606 -0.24045122620216519138 -0.034849414197582986863 0.43630388415776205635;0.0062096042741754727684 0.029038254832275366135 -0.027192933600934787036 0.099529300091670255823 -0.067411118060349162207 -0.62844401317173403942 -0.1872026587581938073 0.13675095717322749422 -0.061028804759349360165 -0.27962505974029583378 0.26146457242118387176 0.14903512082590741894 0.23952701288800204438 -0.14072947011867720235 0.18682821010855565902 -0.16350124462790563418 -0.12717741558895084841 0.16330584971111800074 -0.15308421133929941971 -0.25423451525908014048;0.88473672142379367056 0.78780863181981664045 -1.8907927212344788348 0.97450057915760179839 -1.0459989184624487457 -0.15267060175973112823 -0.93741161666832306665 -0.98612885839398534138 1.1985250685962940409 0.43766876923487957329 1.6598402603788908749 0.16306795074448773852 -1.2244587381395755088 1.3518540143621591287 -0.81127965836100490726 0.47599634327008266688 0.6547060835455539296 -1.9166953276376670345 -1.0931604989636649616 -2.0830939043198508642;-0.22169037250988049559 0.23230847062983212004 0.29400670937977085861 -0.05986437500221342134 -0.27363729995328417433 -0.71689842730177899544 -0.11880089319634559719 0.11667431547520318302 0.49164284807017716306 0.13105451902596054747 -0.05637939756404833358 0.057566836302815678483 -0.14441380135333906076 0.62405784692841270722 0.32657166320140740279 0.29932460620439133026 -0.32667234402725803255 0.0090216317774741983104 -0.84800266243906308183 -0.58271712384534501972;-0.058342325582485948798 0.24214882136469412233 -0.027351418273075731036 0.0088199689883784095773 0.46121451463761348188 -0.12745961393308763432 0.40077814309463050124 0.058432971399414827818 -0.22919255795432916245 0.2988185411913122369 0.26698438390207790416 -0.77343644736663408334 -0.059007514187329128397 0.30155684096054269361 -0.040652086014613064702 -0.069474171375826745956 -0.22409693956956633354 -0.20364481538475875944 0.21776641583796479962 -0.12029415414049668409;-0.18298353746480194859 -0.26077376146468506102 -0.17690035604252926649 0.13486409643269101077 -0.30996204111855474306 -0.67413129080456135611 0.075743552092129767805 -0.16002105819336623349 0.27971910226205154437 -1.2683871942819417988 -0.61105858276699520637 0.10350858906704368811 0.027176372457510564878 -0.41134557234310797913 -0.17367813242516361161 0.20181585692310721747 0.48083136817811011898 -0.085157587545183294209 0.021379727953855180017 0.67204139366796722399;0.32450881037939000029 0.045185407287256840192 -0.43044454517275720917 0.85520196052486374683 -0.37678996759146149431 -0.021774392402266081609 -0.62720149638281630367 -0.52332087822748418748 -0.11348176724508705904 -0.37223804892353873353 -0.02190255847275053569 0.47564398068818702914 -0.33000759382198158187 -0.18932882314840354665 -0.0097278368919735350856 0.50620473842072744031 -0.38483612648183057603 -0.41850999615857004121 -0.32374073411410936307 -0.53352947067111389234;0.075862000078862401597 -0.080021560619260800884 0.27871118030307334701 -0.1469421958828358854 -0.16881344133360118298 -0.14431589297107649816 -0.14736682475574439111 0.045043424781701972559 -0.099674053197495782186 -0.23904192963444223508 0.07468643136750446887 0.3820019708089888999 -0.082044891957190377307 -0.063346044637155748958 0.013458490951679785361 0.39633789743292963115 0.18245461945385327285 0.19400935523890858181 -0.06467705313634582176 -0.44318410978129979538];

% Layer 3
b3 = [-0.17052783163038692793;-0.30620647721526228491];
LW3_2 = [0.34051774141588020406 0.54705075965266292126 1.245461509462794103 -0.0042286792443539961833 0.70970660292415066461 0.44585949174638528358 0.14143012040129895879 1.1948225093113185036;-0.025479328179072412153 0.80212300697191440957 1.2160031564504840684 -0.062548662229095747245 0.67436914482882925892 0.479159466108586507 0.10837070922758375302 0.77421590182683741599];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
