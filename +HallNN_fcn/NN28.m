function [y1] = NN28(x1)
%NN28 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:27.
% 
% [y1] = NN28(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [1.99977003007742;1.99890787523396;1.99825389850242;2;1.99800940962891;1.99890000180372;1.99917475982744;1.99831740442327;1.99821031055114;1.99861849946926;1.99816452326267;1.99927286666735;1.99807161188081];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.045783583301835864554;0.64665026647988721464;0.050717835860425497518;1.2277928572741059199;0.17622569923214886911;-0.87718316007521168753;0.19997970875721338135;-0.46966645791521549613;-0.20529048898839835635;-0.22771786996999424102;-0.19471083376628151029;0.17853696183825817911;-1.1697684578790186194;-0.00073155717197768369703;-0.39999053333783840536;-0.65843796574623714157;0.11788094106621793689;-0.12885473855195769821;-0.050243199693274787077;-0.13627016083730755791];
IW1_1 = [-0.18409553262229502724 -0.11808961394689310165 0.080010926634831502913 0.058101768567059793036 0.37009382447638106139 -0.047816449965417714973 -0.53196672679633094649 0.15996793124923203155 0.0060874932449485373923 0.001411332616929264136 0.081266196337231477731 -0.086558766783277854562 -0.069030451558234354192;0.41055792725400547249 -0.028570330527695531053 -0.30472976778397087294 0.54921286691539195068 0.27843485498490588848 -0.21391006405777648891 0.36187892799118986931 -0.81546247710360153516 0.21928227302964201084 0.17495422907327257134 0.20447958366396723484 0.14473094547456330505 0.19188768362947211665;-0.4013114206744403667 -0.41345297039186057475 0.64829236121710631657 -0.57597279741562712463 0.32359850830878011951 0.15110224981404565825 0.090121389718715860795 -1.0817339706343940264 0.064769200899215423339 -0.55837996195377281872 -0.45215035455002516862 0.071496014682220082603 0.066421425456390514874;-0.20146532035869998967 -0.50970532102368526495 -0.32925360836006878351 0.138954317042748271 0.16276324550635082322 0.42173430475526446637 -0.73871391557651833182 -1.787832197182522842 -0.021234049364079299327 0.55258074908450793838 0.43016929652637742043 0.05073065746305556456 0.052727987516079558028;-0.20870003554292898551 1.1484095834678016423 0.62880823008940678331 -0.013006531781190190655 -0.48995744020890802384 -0.65418877829661659096 0.070360773388020964036 0.59725644265252009202 -0.072815507536112197839 -0.0642760311559106845 0.33289908108153937194 0.10804789917690411916 0.034616228968682057066;-0.81365068438488097335 -0.41475813555735646654 0.35834847143113696122 0.24604530667537385935 0.28450741324866229975 0.095301002756342886868 -0.48645414442360435103 -0.24979709939956673548 -0.082187754322021189246 0.10992654743130689243 -0.16471972784560279246 -0.065986572028352480368 -0.013254198211775586672;0.81537867357875359886 0.17779253695984656436 0.13630156513332072898 -1.4859255308069918566 -0.13824197552570349767 0.10791580991158891689 0.41172267604030499122 0.24139823702337623312 0.11953381980687155517 0.11670079704776857576 0.0075129741066205790734 0.14981966303041419075 0.034396126089746195675;-0.2205254150028068405 -0.29683377415232281571 -0.16065278193853829714 0.86154048922427695079 0.11321910064362569748 0.088144775083286774908 -0.13269619661187417869 -0.010051802476961798488 0.037299312532977232926 0.085384681746391188906 -0.18216450011008017418 -0.031837333459580341444 0.021514877032974711463;-0.21088699803513660802 0.45009606799619011896 -0.35177641095745243449 -0.11636402208800367131 0.11300824582659255158 0.089923517560261498338 -0.65969617377524381041 -0.1261071306315460494 -0.32826924297645343476 -0.095694650513722556706 -0.28793971294580433806 -0.091377867906113463548 -0.0083610121798978545571;-0.8447260913075941291 -0.19759203657296983692 0.68687943910884630139 -0.58586847896590588114 -0.41222557824090277911 -0.25596428524892061995 -0.090591309284275445268 0.18686683296497169637 -0.33082938490303137602 0.34861664889684179647 0.051826180080938012706 0.021432098897541329574 0.11238004023280832866;-0.87282637830404274926 -0.50637295666296477936 1.5011437364287580909 -0.41460103301997275338 0.50957592508577431722 0.31456248857662555407 -0.42151580029315943721 -1.3185288251551618988 0.12731379770562820108 0.23944479331049772775 0.41991219095898552061 -0.083592661021170897029 0.0074990460207680006977;0.0088795388692990886298 -0.33611510602391048153 0.43768994209273487384 -0.26313006140018496692 -0.32921554239859035507 -0.21843663901029336527 0.60844277604233587553 -0.5037545331133141957 0.094489944779933568442 -0.7774915707578630153 0.09902580994348607335 -0.15306462025315417663 -0.11714389005912313746;-0.60115248567119161649 -0.90074409039961700341 0.95969786837169290816 -0.60709228165554407486 0.64722557371654154679 0.56334959917393212514 -1.2442647744456605263 0.83898431142558094198 -0.0061012451190097299544 0.91357964830504712062 -0.21046890926145375711 -0.029659453449097390038 0.10946673625855443679;0.30287889041749671559 -1.2103742475254006816 0.026808442308259381598 -0.30594540322667207466 0.596525226419550747 0.042336232320571008658 -0.16614407674210299182 0.33300704259866376056 0.014307294648226831502 -0.23795271875320805899 -0.4401860610222794179 -0.093994765942416708127 -0.023755676929042703754;-0.52337434115341874286 0.22437058591981376421 0.21095626118182356223 -0.39945613983161043503 0.40897487194050297088 0.2336011411842819907 0.2057459237975298727 0.18927857393821645449 0.014049685262027468424 0.5677340381612925313 0.47288391130338808255 -0.17094185892539756622 0.21827744712183130837;0.21903963161566844531 0.54205898560589294011 0.37041650704593859222 -0.21333957001079878468 -0.23773387390795996943 -0.23922892617255700487 -0.20142871267321979523 -0.42292686173268129179 0.015705707591416297186 0.35086631498369430515 0.21438081196320296629 0.07234443456386902005 -0.041175023685402628582;1.7468449839530277856 0.14042860684967883866 -0.31039858573143663811 -1.5990476633015973107 0.011529494035015163886 -0.15485575436944476468 -0.091434620538432445636 -0.26163077261682537999 -0.049075933071097359306 -0.15214819158936912502 0.020604644403264690822 -0.076848692887192773804 0.029908310134644965766;-0.25500245010918204391 0.20748235355300884142 -0.12451988650232619082 0.040011797866124382272 0.20351737084424381674 -0.27052713622692625695 -0.0064893363056519413196 -0.061788283946180064254 0.012792943585577629118 -0.20003228843126605319 0.093122302957121511069 -0.033686537526329052294 -0.023974043781346977139;-0.38322611439929293864 -0.10660971102966947111 0.28272771767736643023 -0.16056497699353647346 -0.44432739611052879392 -0.045109413737986631121 0.42385186342927616554 0.1139716715789126783 0.0019675825875785923902 -0.02102857955216290084 -0.016141094944579322673 -0.025540128795789172889 -0.01287602338014594977;-0.073902308226707527639 0.028886590874350116798 0.18102027505952045239 -0.094558264769238120628 -0.35004492712148033151 -0.23305938301585094052 0.44937177689464236074 0.14653408431840420079 0.02358446271718468365 -0.2544271832158587765 0.1034383551230416004 -0.08663285855558627846 -0.07594493445702092671];

% Layer 2
b2 = [-0.54600084215981814495;-0.57425347583050234679;0.083741285915267554829;0.92419004440782692722;-0.51035583819697705188;0.16509127254427191644;-0.11145334892787715775;-0.14387730339322402084];
LW2_1 = [-0.022751616245079910039 -0.1790540407081818719 -0.0073069037824062951433 -0.40544763639437308989 0.43733812824400281061 1.089094908977930265 0.34074697732649611437 0.34161194868596000962 0.095322974309066235699 0.13141679311598780666 0.1714427360156577651 0.020730818259204933374 0.62143609389792708875 -0.17219355809715750083 0.10996791999889739266 -0.15768015527885334559 -0.23662298407659007604 0.030476504885878101525 -0.21964063594771826571 0.48893681317648474138;-0.25551770643295701468 -0.28033208610039739295 -0.14776625054222630729 0.26788189492976055561 0.15055139018864011069 -0.55699048925103944452 -0.078258316076261630334 -0.28900729546452819108 -0.29860645343794223194 -0.10057539524573715084 -0.096983114205496392946 0.51448271685129021158 -0.48081837389791576287 -0.080682209450157069131 0.20712040043685830959 0.3871289060937315174 -0.069694767974149196554 0.21796771442266296703 0.80088386669679534346 -0.16574302699861853672;-0.19749778648963334238 0.068743503140329162426 -0.028687116529115964936 0.094395822268562301627 -0.13545460669225872774 -0.18619173367824806697 -0.15504649739323403401 -0.083230057976028989919 0.07671856079609697121 -0.013501516667917592626 -0.078677275022058651421 0.10736201864266863015 -0.11102068096154581178 0.27150960451293898457 -0.03226139531591091375 0.17360842907257567624 0.098593683933636502847 -0.28976044847187132358 -0.44713040462947006848 0.35398677208403156458;0.026727094930271880213 0.86293848817332563517 -1.3593917423819421586 1.6905206715848561938 -1.2259069130221151855 0.64101969448192208656 -1.0633028648555100659 0.64793769838009807049 -0.44020550282660669827 -0.82084345358353349997 -1.7060739722769335813 -0.77200831221211674293 -1.7932006283857695461 -0.9111290599500762033 -0.43307021791146005363 -1.0017092244519434363 1.7125407505984047152 -0.15711292117010461356 -0.58464982212305804943 0.1606082043654064595;-0.18593273102610027858 -0.5400717682107697426 -0.42857177331589496605 0.84701718323609898054 0.10273553734639273571 0.19458738245134957201 0.57086177563612461316 0.43326397562242108252 -0.58057149693655285549 0.091541736768013554082 -0.40238505079343744875 0.92405588100306712551 -1.0230693339513559081 -0.40872169494547844204 0.48285212880551175996 0.35446186099098442313 -0.13911299058961462682 0.12099382515051748666 0.027422396052802222588 0.53161021135813169014;0.41379394445611322739 0.16668225567383135322 -0.14537611425846619362 -0.012757018177363889377 0.056203006071078837058 0.41670280214961891163 0.23007493950444427022 0.016197299743445362635 0.0092211138605952144148 0.15229035414790137448 0.13771086036981014522 -0.087914012940864066925 0.080948146063710063602 -0.062759201695479063798 -0.11898809369182329621 -0.24736267674755268997 -0.038348315877523291018 0.20818858916254839864 0.42091962384687453547 -0.34536640338762586433;-0.53107649977686988141 -0.20771022383149248536 -0.12718731587729348309 -0.086000894785768569606 0.073446941694403536371 -0.20939961969323864222 0.0074321541831712054776 0.1032580204039896532 -0.48364923213090643683 0.017414948080121554763 -0.10306197718735994606 -0.032212165167060949345 0.12815511492920597658 -0.12839983545583472102 0.031804410395416413126 0.42776170876549979294 -0.15765728673340173582 0.037221545865858712832 0.11153596023655394653 0.32834657907308018032;0.35447727242611609677 -0.052411641591919549965 0.30048936188587649365 0.090139450004370791358 -0.30428858292071192526 -0.056481634424413409978 -0.10051640222431082461 -0.010161956292501491544 0.11687255082341919954 -0.12628361311062760719 -0.36729419950999531164 0.090325430762502559312 0.13353422283397176074 0.20152302629279494894 0.06823071961679784414 -0.034183780054522772129 -0.039086720707265910912 0.084884140742252783829 0.31782772427064243104 -0.49902574671857052868];

% Layer 3
b3 = [-0.58977980057638312861;-0.39374208512316249964];
LW3_2 = [0.8471105734973273238 -1.1869078809137234565 0.66752005336187480999 1.5621470190859199079 0.47364237094097993985 -0.92322314563429408452 0.29374401718124859562 -0.6022396708098152196;1.0878774743810131209 -0.89403756588573146669 0.91266130287092939177 1.6014473428353344087 0.34547642879473422495 -0.51418193419197111282 0.32609970796582260499 -0.50156252590944538916];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
