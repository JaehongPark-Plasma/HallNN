function [y1] = NN90(x1)
%NN90 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:30.
% 
% [y1] = NN90(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [1.99993233342675;1.99910331728343;1.99960486986094;1.99819531584545;1.99858070669912;1.99947836685561;1.99872622098752;1.99871905256269;1.99995519189897;1.99937116494899;1.99834271949583;1.9993992276334;1.99871994899041];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.076907305937308073629;-0.3360764816269783406;0.21369998854437621816;-0.0037485600496153987683;-0.40065612331954159053;-0.25674843916612088979;0.017728285421427479596;-0.330308952651108656;-0.46955351979992593359;0.57354837163427041524;0.59629229598713984206;0.36176846529888245785;-0.74698417959606200345;-0.35934739475154403587;-0.051224503801828767668;0.34744725785032315457;-0.34116433922700167836;1.0438415201420674361;-0.92428851574895554144;-0.46598355387475759448];
IW1_1 = [0.18367600418915863703 -0.44939103657987367058 -0.055860355042094855804 -0.042124147417947968575 -0.22725946972480437491 -0.066437953705052885112 -0.088438631244220911043 -0.24243313416162712293 -0.16305065404303417664 -0.21323743800863612097 -0.16394098438779314275 -0.0085990748349133224598 0.080312111397994753736;-0.50734275872083101078 -0.21483474477493980093 -0.0072999910576618462499 0.0013990127798219368846 -0.01470707251654321257 0.20287101369208873636 -0.0080892600402807518511 0.027069042349190719499 0.03506521152041811723 0.34260432748826735727 -0.05336988994505639794 -0.010911973513218199 0.089082198463563938562;-0.54676747697142624727 -0.39457620619554956143 -0.25825665768781935761 -0.030596783327713372724 -0.016597209097212670126 -0.42715170301927463115 0.11439408297408737436 0.10902295967794319032 -0.17647194790031264788 -0.072875341278294022973 0.37569427939234950609 0.049278234129427715693 -0.18013606565797157799;-0.046371268362908883709 0.42051449864039419646 0.28929527215347500269 -0.5809856607793389971 -0.64135989060907672155 0.22507350942835058216 0.61432998976165742455 0.10445731286390190495 0.2827654512906512263 -0.24561646310682783145 0.10729621518826711057 0.15524619790777252626 0.12150441128945725644;-0.31043227730385053453 0.082000983253374876147 0.10941915182490756508 -0.24696621194036591507 0.15983683877866408651 0.18916551731516623169 -0.1254920408308793367 -0.30019233343829615501 -0.057444059602006082577 -0.38604663096560531965 -0.69587362174924660696 0.12013130965424871632 0.15290669726049146981;0.39581652747178902585 0.14625092425801852758 -0.20319167995174963748 0.2529262099096604155 -0.068552147541801264352 0.06503526053782548999 0.16471547937721311983 -0.13477500288149721341 -0.0051527665573685233272 -0.023721216621975869943 0.072868267035299402745 0.024316165575797778209 0.051600160581772247514;-0.33818944426028818562 -0.53498628434388795228 0.17809372538360987437 -0.10035785694535730161 0.40824664602650806433 0.47495837313857702799 -1.0166824032789298915 -1.359052432109414843 -0.073913130912504690362 0.94703828824438596179 -0.39479206294195884341 0.08869052799347006133 0.053604255074120053803;-0.37137694386350417197 0.5793048784576189103 0.35198684075139380356 -0.31939083308775945147 -0.4487555885169421388 0.39177873757808273636 -0.2130729275628154562 -0.38377836082425487163 -0.081627325359831554019 0.90404934204356390826 0.15228090618903322717 0.056208049269184934271 0.017597946076934784659;0.35854380699829341284 -0.9353128005828592606 0.102798433739688444 -0.17150795664784695971 1.0009528271832399682 1.4832095815770884872 -1.4173755115371400315 0.25112099200135518107 0.24335161753359671466 0.91255191777493394056 -0.26074257848606474663 0.009084246758850209047 0.41237297314085236133;0.037330629581170129971 0.23777588326974935518 0.06780709455956340781 -0.742180936963062865 -0.14348174186637613348 -0.078305795135539313367 0.46061078848780445671 -0.53303369256191712733 -0.10527922977560845441 -0.17868515744743546092 0.20827780269427570436 0.060768638596441777733 -0.021635217170218712379;0.20542306180546324179 1.4286512169596079502 -0.46162483994414593713 0.75702723040241926 -0.36239595161320325989 -0.17284068142124275891 -0.16455074910591005466 -0.83740511853053500868 0.01249174266044911219 -0.11163954073037046788 0.48031755407065235275 0.14804881496539182284 0.0060283229199790686406;0.20717499575324965777 0.80227162618257519267 0.58185143562549790364 0.33931774267457870398 -0.37475346432245154604 -0.35150888308774375091 0.30917143840258554111 0.33132844500887098649 -0.084334860243688331005 -0.077450991870920360416 0.50092674071061804586 0.19423264059336584064 0.21239478631706418255;-0.1858782968754781606 0.60655181428515936304 0.51486295803363291146 -0.31950331694229028301 -0.35267906046722041769 -0.83083546235564920135 0.6981868923711365138 1.756736183251058403 -0.12520665953084150757 -0.36409606029494012702 -0.56658182977543392056 0.0018504272612103879296 -0.17154385889003348487;-0.60897922278169103194 -0.059867280991715586536 0.29629641011413515583 -0.49198401096032251534 -0.40954289484588846104 0.13945116489974002105 -0.084586138026667936907 0.4468735883874073167 -0.17522254630490177729 -0.060448384200283575285 -0.27043984000646487109 -0.26276683461217231752 -0.15108791307699062645;-0.27671997841454498701 0.56064547646917461954 0.22826734009564522698 0.33051935349739647307 -0.18226383589397732177 -0.45727163800576187125 -0.30544185482145908006 -0.32005378467350870109 -0.004356869478646065684 0.265484447830301451 -0.61251890753128701572 0.0639456055043083893 -0.023110568296010932515;-0.67193971522379469796 0.28724297063306203359 -0.38557282424814476318 1.659980728690482632 -0.38177249282864239577 -0.086506604337874340449 0.92612865541218147847 -0.4787294834571084734 0.19927897610509098802 -0.54697262891819731223 -0.16502789257407904366 -0.082566001996268803542 -0.13349624610661880997;0.38673765650486252587 0.031207638371693439266 0.092993776226850149991 -0.38450568599834744621 -0.10919623970306777117 -0.0028639696749382832774 0.084440470675757578478 -0.054361674033000503825 0.010505606688978855537 0.0041833148086560991569 -0.10367809184235557418 -0.027375530395000836209 -0.060985720244170718574;1.684673857568056432 0.63667730071177575102 -0.68032301330474731493 -0.97268003868183827709 -0.20739257861569795893 -0.22103691298770591911 0.50585230323704921673 -0.58396341171286947347 0.087391721043124578894 -0.31937797261506722934 -0.40968419375285453077 -0.06138482178816499768 -0.0070903709028387546312;-1.4322369302423552107 -0.7060272256346528108 2.0511797300513654463 -0.97597083031623454996 0.23792389563662630358 0.022932180637156865388 0.17255051659104742035 -0.47028724801600341188 0.1302021504727627621 -0.39499105943153917098 0.014916866813997379029 -0.10205041974162996909 0.0018391810601015882651;0.55031872598676079278 -0.46754641819084757914 -0.64553255150264754469 0.22207897148558705669 0.17046138906053151518 0.2676621047681367882 -0.21712708546496720108 0.63303346874589816462 -0.025324808423626388176 0.24919640361037423415 -0.46482506456092903546 0.18066098499174507164 0.29612337706381230973];

% Layer 2
b2 = [0.026826846239190571541;0.0022441699775834029681;-0.059399330141190267995;0.10195565321898747424;0.30405579006119903829;-0.30141605028071893901;0.10460717577868861028;0.7150334314105171174];
LW2_1 = [0.077909914269002095155 0.060218185944898694473 -0.032699264889754435515 0.084917448191158359516 -0.20866844327403796799 0.61145642860415849729 -0.289953532103810252 -0.19821005877042227605 -0.098618575148296985788 0.2760823412604206939 0.0092198804931873240553 -0.17673047321129514708 -0.1595095839314428221 -0.022860696096046562859 0.35927024638625565389 -0.0096964543334586671131 0.47921951807972829052 -0.046023615174400123173 0.27572347496002175271 0.087544352319529755713;0.10097750692434878661 0.15256805316209606782 0.040368878973279183342 -0.04373904153074694573 -0.12665081535530506307 -0.61236962862451427281 -0.10574157938133184331 -0.13183466100264012999 0.1704467052864962473 0.096802192818363830273 0.18949748477553457482 -0.20445625681359036463 0.13211632350098093114 -0.10379371690039465581 -0.019090722794273411872 0.077967261136169696556 0.0071636151374707811995 -0.038886850664361656549 0.034523596179276049012 0.14822153403506968528;0.20315215151249585435 0.054974035514317579065 0.021336788117038561763 0.07765415081670885844 0.055208895130475554858 0.33447961723119679078 0.17994886581981017759 0.24829455083997037379 -0.21504986057125621834 -0.29888960826278643257 -0.46448524621212911034 0.46113732410223895464 -0.15925881557733764793 -0.014654946574560191383 -0.062494644778099656124 -0.10489029551806264284 0.39508735471727740585 -0.095446388006624666156 -0.36742718798879991926 -0.39962866247345735227;0.16288198326339584088 -0.0030863904413690971401 -0.20603755398477269223 0.37680983697813319466 0.027390860417451746295 0.15206949401969022118 -0.16214825084712519709 0.23208889199100415923 -0.2235329712636723587 0.50035493245452844491 -0.65151993286867315724 0.3795934833720926993 -0.20153486017911673156 0.086395498158075817452 0.39189794560173624172 -0.21612502256914148391 -0.26852934154083790697 -0.31597700697405739501 0.034098125768971178362 -0.44739120660553960418;-0.29439205018711778195 0.60229098690704196972 -0.094090667590760138084 0.19649156981284229828 0.24126219125238654306 -0.09866776134220975325 0.59662807994843125581 -0.38208863273027365848 -0.3683795314044742697 0.28847565731833596514 0.088519733683562029647 0.21984401857697938309 -0.14522856156761840274 0.45128613048537896679 0.29849590075912002529 -0.030983905062929750773 0.18246832687158578978 0.083427461868013030877 0.47190456469553171415 -0.1854942737747679038;-0.24885703614825213648 -0.26711309472826200162 0.43595300473669573726 -0.67613742706245127945 -0.36416738929152675519 0.09457293718420040074 0.69504759075257849243 -0.12021757498248335227 0.84550033202728236414 -0.096569509223376870377 0.1052488263567618737 -0.271554811392233586 0.16533873091185860571 -0.44366651522462213775 -0.0078595517758511482947 -0.67838258115764349387 -0.030805360486385033325 -0.38247602850056916513 -0.18903005059895600093 -0.47663546245550975078;-0.21359438740591979444 -0.49273781511502567909 -0.17103607254914532376 0.48831641580796686375 0.0087491396926144601037 0.23779225856635813341 0.080891325043107295545 -0.015870628486250065725 0.25055681390198258907 0.38920251098353281227 -0.23165660341544444534 0.35383562256532719026 0.65593095453074590218 0.43076286075380615381 0.28877226635860608894 -0.00053386351343290110172 -0.016224526047209128499 -0.10392984380751683904 0.28720294578905325444 0.15620069927456572967;0.70591413622219623125 -0.16042467677609759114 0.64707833651654289575 -0.90551983009904868371 -0.51974922107962584494 -0.10030880264827622683 -1.2877311454789646117 0.56681022791451596277 -1.0177324215158130016 -0.49947984588550575769 0.82217835147446571842 -1.1944058267638111293 -1.7780093037108861687 -0.92101729781068386593 -0.33935345792828147671 1.4841991964292520212 -0.49096328096347890968 1.8480306433158937285 -1.9834876240226706479 1.0632384708315534283];

% Layer 3
b3 = [-0.54884368934709870658;-0.3790171829637532519];
LW3_2 = [0.77318371855473988496 -0.69437119542459557753 0.48482441718088742366 -0.59037449519367446449 -0.24383498907734427186 0.12762866580837436969 0.31065616609701390827 1.2768031942736097761;0.93441168598672186274 -0.22645107525148508443 0.72001958607808602686 -0.58658181703982203992 -0.16887241449520831726 0.12136480492894924366 0.30500417988343236919 1.2175335106516942396];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
