function [y1] = NN41(x1)
%NN41 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2024 22:52:28.
% 
% [y1] = NN41(x1) takes these arguments:
%   x = 13xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [1.99929360347407;1.99969450272434;1.99831051714368;1.99864674531377;1.99807645408056;1.9989651149308;1.99874658077426;1.99830215040587;1.99890936844593;1.9999313232692;1.99844868744206;1.99823211710649;1.99898678479648];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.2892889888694885059;0.64430163537180884514;0.10886166083329340548;0.11578362210459532122;0.00091309995598819020113;-0.1779207103683082547;0.2807957782900698529;0.08517603582372035298;-0.66771237136191707862;-0.7287584676806992956;-0.14561969699995069849;0.048850512828393845288;0.08435740003944795784;0.065692257803205825195;-0.8619247191153028842;-0.25647505125797692704;-0.59083973118692922899;-0.091453641196500498611;0.38710654285649465089;-0.13386240524173573241];
IW1_1 = [0.073776989254862521128 0.66865369537007435241 0.18391650644144666438 -0.052495567038864286713 -0.52219475064195097769 -0.69187350152745330512 0.79175546881757041806 2.1246019382940941611 -0.044492358199029885535 -0.51051831268568914624 -0.53145224107933219937 -0.0537805010030059788 -0.10311887429835270291;0.0038143198844040344248 0.78982693915885970881 -0.43249944003784007718 0.36635141077932081854 0.10119206072633797622 -0.6559090952077458736 1.066996164784287604 0.12111727840506192333 0.17182269882097689351 -0.91681109381775682809 0.13941355737837346496 0.21458466910864781863 0.2320973225228588066;-0.13287396223509995163 0.52714475058480492198 0.31563693013773075347 -0.8906188883974704984 0.35313937542018430937 -0.077375813889179287375 -0.45825312968127529523 0.14790497772223337725 0.098724039918778733194 0.11191068073155954754 0.1354708577067174069 -0.050992065377708006846 0.00038732116181015895442;0.017098486851052939473 -0.21603137067522115711 0.19770238072898368986 0.18720448904565631376 0.39971911728281256382 0.091473052385775743822 -0.65692930304798402563 -0.16755168750780691234 -0.016504488456677509495 0.15283423350352334791 0.11952384959187160873 0.15853926251880928744 0.050567744702162666093;-0.12214310277561113427 0.062775754544673198487 -0.13658432916133214641 0.31236204390442001699 -0.28384572558217169291 -0.47280034452281138879 0.33059114347080187368 0.40693904057335111846 0.16458826898516842885 -0.83343397391673101904 0.21359267922592581335 -0.45364657538737845899 -0.072089971971897273684;-0.14574561536162189412 -0.16003959867862263544 -0.16015694300309077369 -0.081496176198351949482 -0.77139187111908302796 -0.049935989066386639312 0.78206393648806427077 0.039558284787341232991 0.019629364679533807536 -0.059205951445097590446 -0.075593352884815792625 -0.0044593592003851047559 -0.10517367547889890089;0.16477534601947863013 -0.1656039872343091357 0.12361917537309885518 -0.17636966961951786037 0.23347497083504600845 -0.40106037049931170246 -0.12080389727675319711 0.5153686688323068088 -0.20976366752941449922 0.29375096986537341248 0.29243849764370549726 0.095119656932111690262 0.032985500180109428303;-0.89074121759675939369 -0.35783208064097504764 0.94405939664194704619 1.0455698443122212193 0.67287485327314655592 0.18042470989854111907 -0.52189282901059352859 -0.042543285751955650653 0.13920193791567617159 -0.39052730900792609336 0.52321539532372929315 0.084156774093410033344 -0.08869364026792614375;0.63060463162019464445 0.18910420471511688034 0.30440001993747212161 -0.029576624531156437553 -0.072324723274647020888 -0.051989738495983213451 0.098648707467571927765 0.0077060264200367930426 -0.10886897519164752401 0.27721293244435152303 -0.22592434798661698014 -0.032351677308951137801 0.13566263172926878999;-0.297614213553236584 -1.3511728385642505224 -0.56793870185835593212 -0.47392788569763921736 0.4759306095203496012 0.52619025957842213703 -0.3438832875522443433 -0.50690132772283036378 0.32846390476952275206 -0.10606110238144395019 -0.54059004453509773569 -0.055991486394142767069 -0.22544222734350052861;-1.9424664730414318292 -0.27719283988113974093 0.25044371670234666372 1.721646666282489857 -0.066560730139862814281 0.16633916861490272154 -0.023477432907697153019 0.20677110508836124558 0.015500566454807806344 0.23785415986864313909 0.10984904995647359893 -0.018428583653809910842 0.0035009303842596416548;0.34972313016362177596 0.30104848843736831121 0.087011669583505799053 -0.077788420289387566475 -0.24452460951002524814 -0.32029298365931740955 0.50277709124963954057 0.040111866939693929801 -0.026770969537454950699 -0.3779880352091499196 0.40145332751952728101 0.068555686289499928598 -0.077588217842186099626;0.68580040547333476209 0.70457195041723164053 -1.0633382955808132753 0.61799929689529675692 -0.33503846142665782981 0.00011108488291271061653 -0.19536840590566151299 0.11482385156231139645 -0.16853118664095556589 0.63388976455758061501 0.44526832009327049766 0.082877184909878540142 0.0089034510430031389705;-0.24639335607632834035 -0.33974362818629288974 -0.6113592675718345637 1.29645576009848984 0.2550565252426141849 -0.34918023209087672987 -0.48061778067183291707 0.07593144511286453735 -0.26749588669024604304 -0.10077928892475879197 -0.14144061633099724862 -0.079827428549754234077 -0.1239050424715989196;0.077154621750256002777 -0.97535603347387733741 -0.054061980017639267582 -0.20852254215429111284 1.1115646464416777395 0.72848640262969355241 -1.3620278155378526819 0.62491218517060631576 -0.0020992597200851668623 0.81712440571885391893 0.007107501665329738795 -0.0067215986749800567257 0.26962883492258099549;-0.50644306538434469278 0.011095893382687758988 0.8528903321597351983 -0.89665126394009009303 -0.10333947905503551579 -0.10323144440274872879 0.24340313867041823981 -0.039689292185623892273 -0.2496102324946602169 -0.077829358500208570271 0.31962963990686765747 -0.02792334096740432467 -0.096884741162818699411;0.28229868103837890692 0.34085132429460313075 -0.57638938757988489314 -0.045348311608118911653 0.090754675463917924838 -0.12996692343959651006 0.13895035775271363798 0.15605240358129537914 0.032826058543339288465 -0.091384381636900324786 0.055666148929250210131 -0.031369000837648042257 0.021853816361954270242;0.068988992102411619833 0.31966518551722827857 -0.084733407245285552456 0.081779609620347304411 0.035062352225167313369 0.22970063199868850923 0.41267728784474971837 0.87151273435349152496 -0.18783126102140393354 -0.39497985711158789535 0.13396093289407462468 0.16167927112545155133 0.13613611451229357119;0.90149977887526344666 0.17545899250035471018 -0.40175284920469289673 0.53064968435873149932 0.092737183675330001065 0.65533147189718343739 0.95906086092203601812 -0.33444358847743810292 0.36558541297105900947 0.045063000037101279271 0.086254105301250008631 -0.051936481170844359112 -0.019166820587459949821;0.53075692119553652404 0.089581629689899563984 0.0031061660141996636289 -0.1117090863580665755 0.028104478723379278798 -0.011719242791023721725 -0.12863643203010610705 -0.27813208549629253596 -0.11202971067123634885 0.14009341158885027512 0.16281293449943290419 0.10292055127431046224 -0.037783121390681191631];

% Layer 2
b2 = [0.062388322476208665779;0.10326895583367429188;0.34537803988868459593;1.1772185128100143281;0.46723289270058221412;0.050780620103597004511;0.473885690587735664;0.52684034621754216587];
LW2_1 = [0.14128338433619427872 -0.16339256753482539475 0.12098833070915628041 0.12617624735703983352 -0.068157312988931198494 -0.0060798520150512399413 0.16209209931459972465 0.25201371881738326985 -0.037872184731847349792 0.013824804801634456297 0.045490242718521242682 -0.23095881678995708319 -0.15233829713869276312 0.0087510588910702027943 0.1393516147580140252 0.12439725058558089021 -0.039774140262495170928 0.0037652532995345747505 -0.097837742928108747953 -0.15628916597590533644;0.36373795220177906895 -0.28475164206922148891 0.32726461931440870012 -0.162925479045265581 -0.16747077021211859149 0.0041234537915780938855 0.30760611250147984475 0.4271276806354206701 0.0049806613802420435233 -0.13688277398200104917 0.23863704910359298528 -0.56270587723342002651 -0.23067445320384058483 -0.16351261902318958708 0.17965633822092844096 0.25709333084542262959 -0.011257730709180841303 0.25366818101060012447 -0.08899633654730987331 -0.23453276994054500504;-0.22785022879573274546 0.34249763310596426091 -0.0088329292420661134622 -0.079550415852645564585 -0.13863690984553986296 -0.19252407592964537741 0.039501260405480215221 -0.25898597845104959214 -0.15517054170598007512 0.3414201466815681707 -0.1973476375122275861 0.10989854410026943243 0.13390861535152381867 -0.0583670184944381637 -0.31829393847610715218 0.40077684749581066193 -0.19756738055193606707 0.07174171695407853544 0.035058853999329474271 -0.3526559946679511115;-1.9906468416448845904 0.78310266299671016377 -0.85195480857385508244 0.049483552723973422971 0.71169652016572770847 -0.38734769475106684 0.2893517838777835971 -0.85119026665200026027 -1.013603939180476754 0.90951285190049624418 -1.8289143938595093797 0.17111128455171972784 2.3467102559471304524 1.6032870885529353355 -1.6002366310037696717 -1.6714855498968805847 -0.019535586788277724962 0.9236430229722726315 0.74244872255709681852 -0.11515140676922681895;0.19173992491744049071 -0.34311940477607333344 -0.10348020335368469935 -0.12089416583428522212 -0.26423969391983292976 -0.73119385505915124313 0.044708599026711662305 0.30424790846672794542 -0.38454581952925409594 0.05883358285404906296 -0.082347762642389035759 0.22679353927687306847 -0.20648348236774224929 0.033705336431447421863 0.36362466265949561217 -0.059119141172720789112 -0.51542932707120980851 -0.18437341213562177811 -0.25843812005269745091 0.26706928189630885218;0.10618094231013915085 0.03030015445742423319 -0.12046969543024263483 -0.7426240027594342985 -0.027678129115436274355 -0.044614953641522694938 0.22204852426419730005 -0.051908706350049432787 0.074203777594355202485 -0.18084901509522163798 0.0020011722747307527509 0.29991887566126657072 0.07045008951671875852 -0.096588698161967856404 0.14985581591905591803 -0.27567344014390976481 -0.55204429410949618084 0.014777002189974571683 0.040928454262862394575 0.29111499289343623076;-0.1022842525170934852 -0.15690882409721926272 -0.028592105658117566991 0.22179653383447253678 -0.18632549358923455873 -0.12486311819168055548 0.29048753909425556463 0.18178234088460687445 -0.19918071844533682957 -0.15127757127057514519 -0.019263031374491750014 -0.31543016970089193807 0.029811503106508881189 0.091159301292166788899 0.0054892990061830241461 0.099952830092736921763 0.077741546143931666846 -0.11814413582232703714 -0.16186584913285631537 -0.48044054021745830063;0.1169052863779068141 0.24016438313976296026 -0.049136340702208486375 0.28269842316715076969 0.05540525656666045462 0.50054836995195106653 -0.17914834888944650149 -0.37874421879913050537 -0.045410927592925427743 -0.34146891099405812797 0.17762652815700116782 0.16316548803043443017 0.025893873871981273188 -0.21871321625668596611 0.085949032578634565471 0.30613496314940996657 -0.27117293985114893085 -0.083432828854127547014 0.17638049606288463966 -0.26088110820875926033];

% Layer 3
b3 = [-0.53382953174947966879;-0.56027240312738035843];
LW3_2 = [-0.63710223747419458817 0.037139664835381260011 -0.18845772546230329936 1.1041798540932572514 0.47100851258062287341 0.76826249701136728465 -0.58303929025416423304 -0.59626400579999627727;0.23540010691602344939 -0.28814799987577244256 -0.10001637478661168368 1.1310244780579545854 0.3040273202516757256 0.87120884949580412737 -0.62347793597792644515 -0.40538696197636170382];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
